<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œêµ­ì–´ ë“£ê¸° í€´ì¦ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .option-btn {
            transition: all 0.2s;
        }
        .option-btn.correct {
            background-color: #10b981; /* green-500 */
            color: white;
            border-color: #10b981;
        }
        .option-btn.incorrect {
            background-color: #ef4444; /* red-500 */
            color: white;
            border-color: #ef4444;
        }
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }
        
        /* Mini Player Styles */
        #mini-player {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        #mini-player.hidden {
            transform: scale(0.8) translateY(-20px);
            opacity: 0;
            pointer-events: none;
        }
        #mini-player-progress {
            transform: rotate(-90deg);
            transform-origin: center;
            transition: stroke-dashoffset 0.1s linear;
        }

        /* Floating Script Button Styles */
        #floating-script-btn {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        #floating-script-btn.hidden {
            transform: scale(0.8) translateY(20px);
            opacity: 0;
            pointer-events: none;
        }

        /* Script Modal Styles */
        #script-modal {
            transition: opacity 0.3s ease-in-out;
        }
        #script-modal.hidden {
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-gray-100 p-4 flex items-center justify-center min-h-screen">
    
    <!-- Custom Alert Message Box -->
    <div id="alert-box" class="hidden opacity-0 fixed top-5 left-1/2 -translate-x-1/2 bg-yellow-500 text-black py-3 px-6 rounded-lg shadow-xl z-[100] transition-opacity duration-300">
        <p id="alert-message"></p>
    </div>

    <div class="w-full max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-6 sm:p-8">
        <div class="text-center mb-6">
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2">ğŸ§ í•œêµ­ì–´ ë“£ê¸° í€´ì¦ˆ</h1>
            <p class="text-gray-600">ë“£ê¸° ë‚´ìš©ì„ ì˜ ë“£ê³  ì§ˆë¬¸ì— ë‹µí•´ ë³´ì„¸ìš”.</p>
        </div>

        <!-- Main Audio Player -->
        <div id="main-audio-player" class="audio-player bg-gray-50 p-4 rounded-lg mb-4">
             <label for="audio-file" class="text-sm font-medium text-gray-700">ë“£ê¸° ìŒì›</label>
             <audio id="audio-file" controls class="w-full mt-2">
                 <!-- ëŒ€í™” ë‚´ìš©ì— ë§ëŠ” ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì—¬ê¸°ì— ì¶”ê°€í•˜ì„¸ìš” -->
                 <source src="tacrk41.mp3" type="audio/mpeg">
                 Your browser does not support the audio element.
             </audio>
        </div>

        <!-- Script Toggle Button -->
        <div class="mb-6">
            <button id="toggle-script-btn" class="w-full text-left text-indigo-600 font-semibold py-2 px-3 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition">
                <i class="fas fa-file-alt mr-2"></i>ìŠ¤í¬ë¦½íŠ¸ ë³´ê¸°
            </button>
            <div id="script-content" class="hidden mt-3 bg-gray-50 p-4 rounded-lg text-sm space-y-2 border">
                <p><strong class="text-pink-600">ì—„ë§ˆ:</strong> ì• , ë„ˆ ê·¸ê±° ê²°í˜¼ì‹ ë¶€ì¼€ ì•„ë‹ˆë‹ˆ? íšŒì‚¬ ì²´ìœ¡ ëŒ€íšŒ ê°„ë‹¤ê³  í•˜ë”ë‹ˆ ì™œ ë¶€ì¼€ë¥¼ ë“¤ê³  ë“¤ì–´ì™€?</p>
                <p><strong class="text-blue-600">ë”¸:</strong> ì—„ë§ˆ, ì œê°€ ì €ë… ë•Œ ê³ ë“±í•™êµ ì¹œêµ¬ ê²°í˜¼ì‹ì— ê°„ë‹¤ê³  í–ˆì–ì•„ìš”.</p>
                <p><strong class="text-pink-600">ì—„ë§ˆ:</strong> ë§ë‹¤. ì§‘ì— ë“¤ë €ë‹¤ ê°„ë‹¤ë”ë‹ˆ ê·¸ëƒ¥ ê°”ì–´?</p>
                <p><strong class="text-blue-600">ë”¸:</strong> ë„¤, ì²´ìœ¡ ëŒ€íšŒê°€ ë„ˆë¬´ ëŠ¦ê²Œ ëë‚˜ì„œ ê²°í˜¼ì‹ì— ëŠ¦ì„ê¹Œ ë´ ê³§ì¥ ê°”ì–´ìš”. ì§‘ì— ì™€ì„œ ì˜·ì„ ê°ˆì•„ì…ê³  ê°”ì–´ì•¼ í–ˆëŠ”ë°â€¦â€¦</p>
                <p><strong class="text-pink-600">ì—„ë§ˆ:</strong> ê·¸ëŸ¼ ë„ˆ ê·¸ë ‡ê²Œ ì…ê³  ê²°í˜¼ì‹ì— ê°„ ê±°ì•¼? ì²­ë°”ì§€ì— í‹°ì…”ì¸  ì…ê³ ?</p>
                <p><strong class="text-blue-600">ë”¸:</strong> ë„¤, ê²Œë‹¤ê°€ ë¶€ì¼€ ë°›ê¸°ë¡œ í•œ ì¹œêµ¬ê°€ ê°‘ìê¸° ëª» ì˜¤ê²Œ ë¼ì„œ ì œê°€ ë¶€ì¼€ê¹Œì§€ ë°›ì•˜ì–´ìš”.</p>
                <p><strong class="text-pink-600">ì—„ë§ˆ:</strong> ì„¸ìƒì—. ì–´ì©Œë©´ ì¢‹ìœ¼ë‹ˆ? ê±°ê¸° ì˜¨ ì†ë‹˜ë“¤ì´ ë‹¤ í•œë§ˆë””ì”© í–ˆê² ë‹¤.</p>
                <p><strong class="text-blue-600">ë”¸:</strong> ê·¸ëŸ¬ê²Œìš”. í•˜ì§€ë§Œ ì €ë°–ì— ë¶€ì¼€ ë°›ì„ ì‚¬ëŒì´ ì—†ë‹¤ê³  í•˜ì–ì•„ìš”. ë‹¤ë¥¸ ì¹œêµ¬ë“¤ì€ ë‹¤ ê²°í˜¼í–ˆê³ .</p>
                <p><strong class="text-pink-600">ì—„ë§ˆ:</strong> ì²­ë°”ì§€ì— í‹°ì…”ì¸ ê¹Œì§€ ì…ê³  ë¶€ì¼€ë¥¼ ë°›ì•˜ìœ¼ë‹ˆâ€¦â€¦ ì¯§ì¯§.</p>
                <p><strong class="text-blue-600">ë”¸:</strong> ì €ë„ ì–¼ë§ˆë‚˜ ì°½í”¼í–ˆëŠ”ì§€ ëª°ë¼ìš”.</p>
                <p><strong class="text-pink-600">ì—„ë§ˆ:</strong> ê·¸ê±° ë´ë¼, ì¼ì´ ì¬ë¯¸ìˆë‹¤ê³  ê²°í˜¼ì„ ë¯¸ë£¨ë‹ˆê¹Œ ê·¸ëŸ° ì¼ë„ ìƒê¸°ì–ë‹ˆ? ì´ì œ ë¶€ì¼€ê¹Œì§€ ë°›ì•˜ìœ¼ë‹ˆ ë¹¨ë¦¬ ê²°í˜¼í•˜ë„ë¡ í•´. ë¶€ì¼€ ë°›ê³  6ê°œì›” ì•ˆì— ê²°í˜¼ ì•ˆ í•˜ë©´ í‰ìƒ ê²°í˜¼ ëª» í•œë‹¤ê³  í•˜ë”ë¼.</p>
                <p><strong class="text-blue-600">ë”¸:</strong> ì—„ë§ˆ! ê²°í˜¼í•  ë‚¨ìê°€ ìˆì–´ì•¼ ê²°í˜¼ì„ í•˜ì§€ìš”. ë‚˜ë„ ì†ìƒí•´ ì£½ê² ëŠ”ë° ìê¾¸ ì™œ ê·¸ë˜ìš”?</p>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="space-y-8 border-t pt-6">
            <!-- Quizzes are dynamically generated here -->
        </div>
        
        <!-- Result and Action Buttons -->
        <div class="border-t pt-6 text-center mt-6">
             <div id="result-container" class="hidden mb-4">
                 <h2 class="text-2xl font-bold text-green-600">í€´ì¦ˆ ì™„ë£Œ!</h2>
                 <p id="score-text" class="text-gray-700 text-lg mt-2"></p>
             </div>
             <button id="submit-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition duration-300 w-full sm:w-auto">ê²°ê³¼ ë³´ê¸°</button>
             <button id="retry-btn" class="hidden bg-gray-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-700 transition duration-300 w-full sm:w-auto">ë‹¤ì‹œ í’€ê¸°</button>
        </div>
    </div>

    <!-- Mini Audio Player (Sticky) -->
    <div id="mini-player" class="hidden fixed top-4 right-4 bg-white/80 backdrop-blur-sm p-2 rounded-full shadow-lg z-50">
        <div class="relative w-12 h-12">
            <svg class="absolute top-0 left-0 w-full h-full" viewBox="0 0 36 36">
                <circle class="text-gray-200" cx="18" cy="18" r="16" fill="none" stroke-width="3"></circle>
                <circle id="mini-player-progress" class="text-indigo-600"
                    cx="18" cy="18" r="16"
                    fill="none"
                    stroke-width="3"
                    stroke-dasharray="100.5"
                    stroke-dashoffset="100.5" />
            </svg>
            <button id="mini-player-play-pause-btn" class="absolute top-0 left-0 w-full h-full flex items-center justify-center text-indigo-600">
                <i class="fas fa-play text-base"></i>
            </button>
        </div>
    </div>

    <!-- Floating Script Button -->
    <button id="floating-script-btn" class="hidden fixed bottom-4 right-4 bg-indigo-600 text-white p-3 rounded-full shadow-lg z-50 flex items-center justify-center w-12 h-12">
        <i class="fas fa-file-alt text-lg"></i>
    </button>

    <!-- Script Modal -->
    <div id="script-modal" class="hidden fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-lg max-h-[80vh] overflow-y-auto relative">
            <button id="close-modal-btn" class="absolute top-2 right-3 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            <h3 class="text-xl font-bold mb-4 text-gray-800">ìŠ¤í¬ë¦½íŠ¸</h3>
            <div id="modal-script-content" class="text-sm space-y-2">
                <!-- Script content will be copied here -->
            </div>
        </div>
    </div>


<script>
    const quizData = [
        {
            question: "ë”¸ì€ ì™œ ê²°í˜¼ì‹ì— ì²­ë°”ì§€ì™€ í‹°ì…”ì¸ ë¥¼ ì…ê³  ê°”ì–´ìš”?",
            options: [
                "ê²°í˜¼ì‹ì— ê°ˆ ìƒê°ì´ ì—†ì–´ì„œ",
                "í¸í•œ ì˜·ì„ ì¢‹ì•„í•´ì„œ",
                "íšŒì‚¬ ì²´ìœ¡ ëŒ€íšŒê°€ ëŠ¦ê²Œ ëë‚˜ì„œ ì˜·ì„ ê°ˆì•„ì…ì„ ì‹œê°„ì´ ì—†ì—ˆì–´ìš”",
                "ì¹œêµ¬ì™€ ë˜‘ê°™ì€ ì˜·ì„ ì…ê¸°ë¡œ í•´ì„œ"
            ],
            answer: "íšŒì‚¬ ì²´ìœ¡ ëŒ€íšŒê°€ ëŠ¦ê²Œ ëë‚˜ì„œ ì˜·ì„ ê°ˆì•„ì…ì„ ì‹œê°„ì´ ì—†ì—ˆì–´ìš”"
        },
        {
            question: "ë”¸ì€ ì™œ ê²°í˜¼ì‹ì—ì„œ ë¶€ì¼€ë¥¼ ë°›ì•˜ì–´ìš”?",
            options: [
                "ì›ë˜ ë¶€ì¼€ë¥¼ ë°›ê¸°ë¡œ ì•½ì†í•´ì„œ",
                "ë¶€ì¼€ë¥¼ ë°›ê¸°ë¡œ í•œ ì¹œêµ¬ê°€ ëª» ì™€ì„œ ëŒ€ì‹  ë°›ì•˜ì–´ìš”",
                "ë”¸ì´ ê²°í˜¼í•˜ê³  ì‹¶ì–´ì„œ",
                "ì‹ ë¶€ê°€ ë”¸ì—ê²Œ ë¶€ì¼€ë¥¼ ì£¼ê³  ì‹¶ì–´ í•´ì„œ"
            ],
            answer: "ë¶€ì¼€ë¥¼ ë°›ê¸°ë¡œ í•œ ì¹œêµ¬ê°€ ëª» ì™€ì„œ ëŒ€ì‹  ë°›ì•˜ì–´ìš”"
        },
        {
            question: "ë“¤ì€ ì´ì•¼ê¸°ì™€ ë‹¤ë¥¸ ê²ƒì„ ê³ ë¥´ì„¸ìš”.",
            options: [
                "ë”¸ì€ íšŒì‚¬ ì²´ìœ¡ ëŒ€íšŒ ë‹¤ìŒì— ê²°í˜¼ì‹ì— ê°”ì–´ìš”.",
                "ë”¸ì€ ì˜· ë•Œë¬¸ì— ê²°í˜¼ì‹ì¥ì—ì„œ ì°½í”¼í–ˆì–´ìš”.",
                "ì—„ë§ˆëŠ” ë”¸ì´ ë¶€ì¼€ë¥¼ ë°›ì•„ì„œ ê¸°ë»í–ˆì–´ìš”.",
                "ë¶€ì¼€ë¥¼ ë°›ì„ ë‹¤ë¥¸ ê²°í˜¼ ì•ˆ í•œ ì¹œêµ¬ê°€ ì—†ì—ˆì–´ìš”."
            ],
            answer: "ì—„ë§ˆëŠ” ë”¸ì´ ë¶€ì¼€ë¥¼ ë°›ì•„ì„œ ê¸°ë»í–ˆì–´ìš”."
        },
        {
            question: "ì—„ë§ˆëŠ” ë”¸ì—ê²Œ ì™œ ë¹¨ë¦¬ ê²°í˜¼í•˜ë¼ê³  í–ˆì–´ìš”?",
            options: [
                "ë”¸ì˜ ë‚˜ì´ê°€ ë§ì•„ì„œ",
                "ì¢‹ì€ ë‚¨ìê°€ ìƒê²¨ì„œ",
                "ë”¸ì´ ì¼ì´ ì¬ë¯¸ìˆì–´ì„œ ê²°í˜¼ì„ ì•ˆ í•˜ê³  ìˆì–´ì„œ",
                "ë¶€ì¼€ë¥¼ ë°›ìœ¼ë©´ 6ê°œì›” ì•ˆì— ê²°í˜¼í•´ì•¼ í•œë‹¤ëŠ” ì´ì•¼ê¸° ë•Œë¬¸ì—"
            ],
            answer: "ë¶€ì¼€ë¥¼ ë°›ìœ¼ë©´ 6ê°œì›” ì•ˆì— ê²°í˜¼í•´ì•¼ í•œë‹¤ëŠ” ì´ì•¼ê¸° ë•Œë¬¸ì—"
        },
        {
            question: "ëŒ€í™” ë§ˆì§€ë§‰ì— ë”¸ì˜ ë§ˆìŒì€ ì–´ë• ì–´ìš”?",
            options: [
                "ê¸°ì˜ê³  ì„¤ë ˜",
                "ë¯¸ì•ˆí•˜ê³  í›„íšŒë¨",
                "ì†ìƒí•˜ê³  ë‹µë‹µí•¨",
                "ê´€ì‹¬ ì—†ê³  í¬ê¸°í•¨"
            ],
            answer: "ì†ìƒí•˜ê³  ë‹µë‹µí•¨"
        }
    ];

    let score = 0;
    let questionsAnswered = 0;

    const quizContainer = document.getElementById('quiz-container');
    const resultContainer = document.getElementById('result-container');
    const scoreText = document.getElementById('score-text');
    const submitBtn = document.getElementById('submit-btn');
    const retryBtn = document.getElementById('retry-btn');
    const toggleScriptBtn = document.getElementById('toggle-script-btn');
    const scriptContent = document.getElementById('script-content');
    
    // Audio Player Elements
    const audio = document.getElementById('audio-file');
    const mainAudioPlayer = document.getElementById('main-audio-player');
    const miniPlayer = document.getElementById('mini-player');
    const miniPlayerPlayPauseBtn = document.getElementById('mini-player-play-pause-btn');
    const miniPlayerProgress = document.getElementById('mini-player-progress');
    const progressCircleRadius = miniPlayerProgress.r.baseVal.value;
    const progressCircumference = 2 * Math.PI * progressCircleRadius;
    miniPlayerProgress.style.strokeDasharray = `${progressCircumference} ${progressCircumference}`;
    miniPlayerProgress.style.strokeDashoffset = progressCircumference;

    // Script Modal & Floating Button Elements
    const floatingScriptBtn = document.getElementById('floating-script-btn');
    const scriptModal = document.getElementById('script-modal');
    const closeModalBtn = document.getElementById('close-modal-btn');
    const modalScriptContent = document.getElementById('modal-script-content');

    function showAlert(message) {
        const alertBox = document.getElementById('alert-box');
        const alertMessage = document.getElementById('alert-message');
        if (!alertBox || !alertMessage) return;

        alertMessage.textContent = message;
        alertBox.classList.remove('hidden');
        setTimeout(() => alertBox.classList.remove('opacity-0'), 10);

        setTimeout(() => {
            alertBox.classList.add('opacity-0');
            alertBox.addEventListener('transitionend', () => {
                alertBox.classList.add('hidden');
            }, { once: true });
        }, 2500);
    }

    function loadAllQuizzes() {
        quizContainer.innerHTML = '';
        quizData.forEach((quiz, index) => {
            const questionBlock = document.createElement('div');
            questionBlock.id = `question-${index}`;
            const questionEl = document.createElement('h2');
            questionEl.className = 'text-xl font-bold text-gray-800 mb-4';
            questionEl.innerText = `Q${index + 1}. ${quiz.question}`;
            const optionsEl = document.createElement('div');
            optionsEl.className = 'grid grid-cols-1 sm:grid-cols-2 gap-3';
            quiz.options.forEach(optionText => {
                const button = document.createElement('button');
                button.innerText = optionText;
                button.classList.add('option-btn', 'w-full', 'p-3', 'text-left', 'border-2', 'rounded-lg', 'hover:bg-gray-100');
                button.addEventListener('click', () => checkAnswer(index, button, optionText, quiz.answer));
                optionsEl.appendChild(button);
            });
            questionBlock.appendChild(questionEl);
            questionBlock.appendChild(optionsEl);
            quizContainer.appendChild(questionBlock);
        });
    }

    function checkAnswer(questionIndex, button, selected, correct) {
        const questionBlock = document.getElementById(`question-${questionIndex}`);
        if (questionBlock.dataset.answered) return;
        questionBlock.dataset.answered = 'true';
        questionsAnswered++;
        const optionButtons = questionBlock.querySelectorAll('.option-btn');
        optionButtons.forEach(btn => {
            btn.disabled = true;
            if (btn.innerText === correct) {
                btn.classList.add('correct');
            }
        });
        if (selected === correct) {
            score++;
        } else {
            button.classList.add('incorrect');
        }
    }

    submitBtn.addEventListener('click', () => {
        if (questionsAnswered < quizData.length) {
            showAlert('ëª¨ë“  ë¬¸ì œë¥¼ í’€ì–´ì£¼ì„¸ìš”.');
            return;
        }
        resultContainer.classList.remove('hidden');
        scoreText.innerText = `ì´ ${quizData.length}ë¬¸ì œ ì¤‘ ${score}ë¬¸ì œë¥¼ ë§í˜”ìŠµë‹ˆë‹¤!`;
        submitBtn.classList.add('hidden');
        retryBtn.classList.remove('hidden');
    });

    retryBtn.addEventListener('click', () => {
        score = 0;
        questionsAnswered = 0;
        resultContainer.classList.add('hidden');
        submitBtn.classList.remove('hidden');
        retryBtn.classList.add('hidden');
        loadAllQuizzes();
    });

    toggleScriptBtn.addEventListener('click', () => {
        scriptContent.classList.toggle('hidden');
        const isHidden = scriptContent.classList.contains('hidden');
        toggleScriptBtn.innerHTML = isHidden ? '<i class="fas fa-file-alt mr-2"></i>ìŠ¤í¬ë¦½íŠ¸ ë³´ê¸°' : '<i class="fas fa-eye-slash mr-2"></i>ìŠ¤í¬ë¦½íŠ¸ ìˆ¨ê¸°ê¸°';
    });
    
    // --- MINI PLAYER LOGIC ---
    miniPlayerPlayPauseBtn.addEventListener('click', () => audio.paused ? audio.play() : audio.pause());
    audio.addEventListener('play', () => miniPlayerPlayPauseBtn.innerHTML = '<i class="fas fa-pause text-base"></i>');
    audio.addEventListener('pause', () => miniPlayerPlayPauseBtn.innerHTML = '<i class="fas fa-play text-base"></i>');
    audio.addEventListener('timeupdate', () => {
        const progressPercent = (audio.currentTime / audio.duration) || 0;
        const offset = progressCircumference - progressPercent * progressCircumference;
        miniPlayerProgress.style.strokeDashoffset = offset;
    });

    const playerObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => miniPlayer.classList.toggle('hidden', entry.isIntersecting));
    }, { threshold: 0.1 }); 
    playerObserver.observe(mainAudioPlayer);

    // --- SCRIPT MODAL & FLOATING BUTTON LOGIC ---
    modalScriptContent.innerHTML = scriptContent.innerHTML;
    floatingScriptBtn.addEventListener('click', () => scriptModal.classList.remove('hidden'));
    closeModalBtn.addEventListener('click', () => scriptModal.classList.add('hidden'));
    scriptModal.addEventListener('click', (e) => {
        if (e.target === scriptModal) scriptModal.classList.add('hidden');
    });

    const scriptButtonObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => floatingScriptBtn.classList.toggle('hidden', entry.isIntersecting));
    }, { threshold: 0.1 });
    scriptButtonObserver.observe(toggleScriptBtn);

    loadAllQuizzes();
</script>

</body>
</html>

