<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í•œêµ­ì–´ ì ‘ì†ì‚¬ ë§ˆë¼í†¤</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; -webkit-tap-highlight-color: transparent; }
        .animate-fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* Custom scrollbar hide */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen relative">

    <!-- App Container -->
    <div id="app" class="max-w-md mx-auto min-h-screen flex flex-col">
        <!-- Content will be injected here by JavaScript -->
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- Data ---
        const basicQuestions = [
            { id: 1, type: 'basic', sentences: [{ kr: "ë¹„ê°€ ë§ì´ ì˜µë‹ˆë‹¤.", vn: "Trá»i mÆ°a to." }, { kr: "ìš°ì‚°ì„ ì¼ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ che Ã´." }], answers: ["ê·¸ë˜ì„œ"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"]], explanation: "ì›ì¸(ë¹„)ê³¼ ê²°ê³¼(ìš°ì‚°) ì‚¬ì´ì—ëŠ” 'ê·¸ë˜ì„œ'ë¥¼ ì”ë‹ˆë‹¤." },
            { id: 2, type: 'basic', sentences: [{ kr: "ê¹€ì¹˜ë¥¼ ì¢‹ì•„í•©ë‹ˆë‹¤.", vn: "TÃ´i thÃ­ch Kimchi." }, { kr: "ë„ˆë¬´ ë§µìŠµë‹ˆë‹¤.", vn: "NÃ³ quÃ¡ cay." }], answers: ["í•˜ì§€ë§Œ"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ¬ë‹ˆê¹Œ"]], explanation: "ì¢‹ì•„í•˜ì§€ë§Œ ë§µë‹¤ëŠ” ëŒ€ì¡°ì ì¸ ìƒí™©ì…ë‹ˆë‹¤." },
            { id: 3, type: 'basic', sentences: [{ kr: "ì•„ì¹¨ì— ì¼ì–´ë‚¬ìŠµë‹ˆë‹¤.", vn: "TÃ´i thá»©c dáº­y vÃ o buá»•i sÃ¡ng." }, { kr: "ì„¸ìˆ˜ë¥¼ í–ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i rá»­a máº·t." }], answers: ["ê·¸ë¦¬ê³ "], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "ì™œëƒí•˜ë©´", "ê·¸ë ‡ì§€ë§Œ"]], explanation: "ì‹œê°„ ìˆœì„œëŒ€ë¡œ ì¼ì–´ë‚œ ì¼ì€ 'ê·¸ë¦¬ê³ 'ë¥¼ ì”ë‹ˆë‹¤." },
            { id: 4, type: 'basic', sentences: [{ kr: "ë°±í™”ì ì— ê°”ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ Ä‘áº¿n trung tÃ¢m thÆ°Æ¡ng máº¡i." }, { kr: "ì‚¬ëŒì´ ì •ë§ ë§ì•˜ìŠµë‹ˆë‹¤.", vn: "á» Ä‘Ã³ thá»±c sá»± ráº¥t Ä‘Ã´ng ngÆ°á»i." }], answers: ["ê·¸ëŸ°ë°"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "ê·¸ëŸ°ë°", "ê·¸ëŸ¬ë©´"]], explanation: "ê³¼ê±° ìƒí™©ì„ ì œì‹œí•˜ê±°ë‚˜ í™”ì œë¥¼ ì „í™˜í•  ë•Œ 'ê·¸ëŸ°ë°'ë¥¼ ì”ë‹ˆë‹¤." },
            { id: 5, type: 'basic', sentences: [{ kr: "ì‹œê°„ì´ ì—†ìŠµë‹ˆë‹¤.", vn: "TÃ´i khÃ´ng cÃ³ thá»i gian." }, { kr: "íƒì‹œë¥¼ íƒ”ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ Ä‘i taxi." }], answers: ["ê·¸ë˜ì„œ"], options: [["í•˜ì§€ë§Œ", "ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "ê·¸ëŸ°ë°"]], explanation: "ì‹œê°„ì´ ì—†ì–´ì„œ(ì›ì¸) íƒì‹œë¥¼ íƒ”ìŠµë‹ˆë‹¤(ê²°ê³¼)." },
            { id: 6, type: 'basic', sentences: [{ kr: "í•œêµ­ì–´ë¥¼ ê³µë¶€í•©ë‹ˆë‹¤.", vn: "TÃ´i há»c tiáº¿ng HÃ n." }, { kr: "ì–´ë µìŠµë‹ˆë‹¤.", vn: "NÃ³ khÃ³." }], answers: ["í•˜ì§€ë§Œ"], options: [["ê·¸ë¦¬ê³ ", "í•˜ì§€ë§Œ", "ê·¸ë˜ì„œ", "ê·¸ëŸ¬ë©´"]], explanation: "ê³µë¶€í•˜ì§€ë§Œ ì–´ë µë‹¤ëŠ” ë‚´ìš©ì€ ì„œë¡œ ë°˜ëŒ€ë©ë‹ˆë‹¤." },
            { id: 7, type: 'basic', sentences: [{ kr: "í˜•ì€ í‚¤ê°€ í½ë‹ˆë‹¤.", vn: "Anh trai tÃ´i cao." }, { kr: "ë™ìƒì€ í‚¤ê°€ ì‘ìŠµë‹ˆë‹¤.", vn: "Em trai tÃ´i tháº¥p." }], answers: ["ê·¸ëŸ°ë°"], options: [["ê·¸ë˜ì„œ", "ê·¸ëŸ¬ë‹ˆê¹Œ", "ê·¸ë¦¬ê³ ", "ê·¸ëŸ°ë°"]], explanation: "ë‘ ëŒ€ìƒì„ ëŒ€ì¡°í•˜ì—¬ ë¹„êµí•  ë•Œ 'ê·¸ëŸ°ë°'ë¥¼ ìì£¼ ì”ë‹ˆë‹¤." },
            { id: 8, type: 'basic', sentences: [{ kr: "ë…¸ë˜ë¥¼ ë¶€ë¦…ë‹ˆë‹¤.", vn: "TÃ´i hÃ¡t." }, { kr: "ì¶¤ì„ ì¶¥ë‹ˆë‹¤.", vn: "TÃ´i nháº£y." }], answers: ["ê·¸ë¦¬ê³ "], options: [["í•˜ì§€ë§Œ", "ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "ì™œëƒí•˜ë©´"]], explanation: "ë‘ ê°€ì§€ í–‰ë™ì„ ë™ì‹œì— í•˜ê±°ë‚˜ ë‚˜ì—´í•  ë•Œ 'ê·¸ë¦¬ê³ 'ë¥¼ ì”ë‹ˆë‹¤." },
            { id: 9, type: 'basic', sentences: [{ kr: "ì•½ì†ì´ ìˆìŠµë‹ˆë‹¤.", vn: "TÃ´i cÃ³ háº¹n." }, { kr: "ë¨¼ì € ê°€ê² ìŠµë‹ˆë‹¤.", vn: "TÃ´i sáº½ Ä‘i trÆ°á»›c." }], answers: ["ê·¸ëŸ¬ë‹ˆê¹Œ"], options: [["í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°", "ê·¸ëŸ¬ë‹ˆê¹Œ", "ê·¸ë¦¬ê³ "]], explanation: "ì• ë‚´ìš©ì´ ë’¤ í–‰ë™ì˜ ì´ìœ ë‚˜ íŒë‹¨ ê·¼ê±°ê°€ ë  ë•Œ 'ê·¸ëŸ¬ë‹ˆê¹Œ'ë¥¼ ì”ë‹ˆë‹¤." },
            { id: 10, type: 'basic', sentences: [{ kr: "ì´ ì˜·ì€ ë¹„ìŒ‰ë‹ˆë‹¤.", vn: "CÃ¡i Ã¡o nÃ y Ä‘áº¯t." }, { kr: "ì˜ˆì˜ì§€ ì•ŠìŠµë‹ˆë‹¤.", vn: "NÃ³ khÃ´ng Ä‘áº¹p." }], answers: ["ê²Œë‹¤ê°€"], options: [["ê²Œë‹¤ê°€", "í•˜ì§€ë§Œ", "ê·¸ë˜ì„œ", "ì™œëƒí•˜ë©´"]], explanation: "ë‚˜ìœ ì ì— ë”í•´ ë˜ ë‹¤ë¥¸ ë‚˜ìœ ì ì„ ì¶”ê°€í•  ë•Œ 'ê²Œë‹¤ê°€'ë¥¼ ì”ë‹ˆë‹¤." }
        ];

        const advancedQuestions = [
            { id: 11, type: 'advanced', sentences: [{ kr: "ëŠ¦ì ì„ ì¤ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ ngá»§ dáº­y muá»™n." }, { kr: "ë²„ìŠ¤ë¥¼ ë†“ì³¤ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ lá»¡ xe buÃ½t." }, { kr: "íƒì‹œë¥¼ íƒ”ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ Ä‘i taxi." }, { kr: "ì§€ê°í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ khÃ´ng Ä‘i trá»…." }], answers: ["ê·¸ë˜ì„œ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "ì™œëƒí•˜ë©´", "í•˜ì§€ë§Œ"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ¬ë‹ˆê¹Œ"]], explanation: "ëŠ¦ì (ì›ì¸)â†’ë†“ì¹¨(ê²°ê³¼/ê·¸ë˜ì„œ). ë†“ì¹¨(ì›ì¸)â†’íƒì‹œ(ê²°ê³¼/ê·¸ë˜ì„œ). íƒì‹œ íƒ”ìŒ(ìƒí™©)â†”ì§€ê° ì•ˆ í•¨(ë°˜ëŒ€/í•˜ì§€ë§Œ)." },
            { id: 12, type: 'advanced', sentences: [{ kr: "ë¶ˆê³ ê¸°ë¥¼ ë§Œë“¤ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i muá»‘n lÃ m mÃ³n Bulgogi." }, { kr: "ê³ ê¸°ë¥¼ ìƒ€ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ mua thá»‹t." }, { kr: "ê°„ì¥ì´ ì—†ì—ˆìŠµë‹ˆë‹¤.", vn: "KhÃ´ng cÃ³ nÆ°á»›c tÆ°Æ¡ng." }, { kr: "ë§ˆíŠ¸ì— ë‹¤ì‹œ ê°”ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ Ä‘i láº¡i siÃªu thá»‹." }], answers: ["ê·¸ë˜ì„œ", "ê·¸ëŸ°ë°", "ê·¸ë˜ì„œ"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ì™œëƒí•˜ë©´"]], explanation: "ë§Œë“¤ê³  ì‹¶ì–´ì„œ ìƒ€ìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ). ìƒ€ëŠ”ë° ê°„ì¥ì´ ì—†ëŠ” ìƒí™©(ê·¸ëŸ°ë°). ì—†ì–´ì„œ ë‹¤ì‹œ ê°”ìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ)." },
            { id: 13, type: 'advanced', sentences: [{ kr: "ì†Œí’ì„ ê°€ë ¤ê³  í–ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘á»‹nh Ä‘i dÃ£ ngoáº¡i." }, { kr: "ë¹„ê°€ ë§ì´ ì™”ìŠµë‹ˆë‹¤.", vn: "Trá»i mÆ°a to." }, { kr: "ì†Œí’ì„ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ há»§y chuyáº¿n dÃ£ ngoáº¡i." }, { kr: "ì§‘ì—ì„œ ì˜í™”ë¥¼ ë´¤ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ xem phim á»Ÿ nhÃ ." }], answers: ["ê·¸ëŸ°ë°", "ê·¸ë˜ì„œ", "ëŒ€ì‹ ì—"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ëŸ°ë°", "ê·¸ë˜ì„œ", "ê·¸ëŸ¬ë©´"], ["ê·¸ë¦¬ê³ ", "ê·¸ëŸ°ë°", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ"], ["ê·¸ë¦¬ê³ ", "í•˜ì§€ë§Œ", "ëŒ€ì‹ ì—", "ì™œëƒí•˜ë©´"]], explanation: "ê°€ë ¤ê³  í–ˆì§€ë§Œ ë¹„ê°€ ì™”ìŠµë‹ˆë‹¤(ê·¸ëŸ°ë°). ê·¸ë˜ì„œ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ). ì·¨ì†Œí•˜ê³  ê·¸ ëŒ€ì‹ ì— ì˜í™”ë¥¼ ë´¤ìŠµë‹ˆë‹¤(ëŒ€ì‹ ì—)." },
            { id: 14, type: 'advanced', sentences: [{ kr: "ì—´ì‹¬íˆ ê³µë¶€í–ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ há»c chÄƒm chá»‰." }, { kr: "ì‹œí—˜ì´ ì‰¬ì› ìŠµë‹ˆë‹¤.", vn: "Ká»³ thi dá»…." }, { kr: "100ì ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ Ä‘Æ°á»£c 100 Ä‘iá»ƒm." }, { kr: "ê¸°ë¶„ì´ ì •ë§ ì¢‹ìŠµë‹ˆë‹¤.", vn: "TÃ¢m tráº¡ng tÃ´i ráº¥t tá»‘t." }], answers: ["ê·¸ëŸ°ë°", "ê·¸ë˜ì„œ", "ê·¸ë˜ì„œ"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ëŸ°ë°", "í•˜ì§€ë§Œ", "ê·¸ëŸ¬ë©´"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ì™œëƒí•˜ë©´"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"]], explanation: "ê³µë¶€í–ˆëŠ”ë° ì˜ì™¸ë¡œ ì‹œí—˜ë„ ì‰¬ì› ìŠµë‹ˆë‹¤(ê·¸ëŸ°ë°). ê·¸ë˜ì„œ 100ì ì„ ë°›ì•˜ê³ (ê·¸ë˜ì„œ), ê²°ê³¼ì ìœ¼ë¡œ ê¸°ë¶„ì´ ì¢‹ìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ)." },
            { id: 15, type: 'advanced', sentences: [{ kr: "ì¹œêµ¬ë¥¼ ë§Œë‚¬ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ gáº·p báº¡n." }, { kr: "ì ì‹¬ì„ ë¨¹ì—ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ Äƒn trÆ°a." }, { kr: "ì¹´í˜ì— ê°”ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ Ä‘i cÃ  phÃª." }, { kr: "ìë¦¬ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.", vn: "KhÃ´ng cÃ³ chá»— ngá»“i." }], answers: ["ê·¸ë¦¬ê³ ", "ê·¸ë¦¬ê³ ", "ê·¸ëŸ°ë°"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ¬ë©´"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"]], explanation: "ë§Œë‚˜ì„œ ë°¥ ë¨¹ê³ (ê·¸ë¦¬ê³ ), ì¹´í˜ì— ê°”ìŠµë‹ˆë‹¤(ê·¸ë¦¬ê³ ). ê°”ëŠ”ë° ìë¦¬ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤(ê·¸ëŸ°ë°)." },
            { id: 16, type: 'advanced', sentences: [{ kr: "ë¨¸ë¦¬ê°€ ì•„íŒ ìŠµë‹ˆë‹¤.", vn: "TÃ´i bá»‹ Ä‘au Ä‘áº§u." }, { kr: "ì•½ì„ ë¨¹ì—ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ uá»‘ng thuá»‘c." }, { kr: "ê³„ì† ì•„íŒ ìŠµë‹ˆë‹¤.", vn: "NÃ³ váº«n Ä‘au." }, { kr: "ë³‘ì›ì— ê°”ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ Ä‘áº¿n bá»‡nh viá»‡n." }], answers: ["ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ë˜ì„œ"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ì™œëƒí•˜ë©´"]], explanation: "ì•„íŒŒì„œ ì•½ì„ ë¨¹ì—ˆìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ). ë¨¹ì—ˆì§€ë§Œ ê³„ì† ì•„íŒ ìŠµë‹ˆë‹¤(í•˜ì§€ë§Œ). ê·¸ë˜ì„œ ë³‘ì›ì— ê°”ìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ)." },
            { id: 17, type: 'advanced', sentences: [{ kr: "ì œì£¼ë„ì— ê°”ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ Ä‘i Ä‘áº£o Jeju." }, { kr: "ë‚ ì”¨ê°€ ì¢‹ì•˜ìŠµë‹ˆë‹¤.", vn: "Thá»i tiáº¿t Ä‘áº¹p." }, { kr: "ì‚¬ì§„ì„ ë§ì´ ì°ì—ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ chá»¥p nhiá»u áº£nh." }, { kr: "ì¹´ë©”ë¼ë¥¼ ìƒì–´ë²„ë ¸ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ lÃ m máº¥t mÃ¡y áº£nh." }], answers: ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "ê·¸ëŸ°ë°"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ì™œëƒí•˜ë©´"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"]], explanation: "ê°€ì„œ ë‚ ì”¨ê°€ ì¢‹ì•˜ìŠµë‹ˆë‹¤(ê·¸ë¦¬ê³ ). ì¢‹ì•„ì„œ ì‚¬ì§„ì„ ì°ì—ˆìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ). ê·¸ëŸ°ë° ì¹´ë©”ë¼ë¥¼ ìƒì–´ë²„ë¦¬ëŠ” ì¼ì´ ìƒê²¼ìŠµë‹ˆë‹¤(ê·¸ëŸ°ë°)." },
            { id: 18, type: 'advanced', sentences: [{ kr: "ìƒì¼ì´ì—ˆìŠµë‹ˆë‹¤.", vn: "ÄÃ³ lÃ  sinh nháº­t cá»§a tÃ´i." }, { kr: "ì„ ë¬¼ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ nháº­n Ä‘Æ°á»£c quÃ ." }, { kr: "ìƒìë¥¼ ì—´ì—ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ má»Ÿ há»™p." }, { kr: "ì•„ë¬´ê²ƒë„ ì—†ì—ˆìŠµë‹ˆë‹¤.", vn: "KhÃ´ng cÃ³ gÃ¬ cáº£." }], answers: ["ê·¸ë˜ì„œ", "ê·¸ë¦¬ê³ ", "ê·¸ëŸ°ë°"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ¬ë©´"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"]], explanation: "ìƒì¼ì´ë¼ ì„ ë¬¼ì„ ë°›ì•˜ìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ). ë°›ê³  ë‚˜ì„œ ì—´ì—ˆìŠµë‹ˆë‹¤(ê·¸ë¦¬ê³ ). ì—´ì—ˆëŠ”ë° ë¹„ì–´ ìˆì—ˆìŠµë‹ˆë‹¤(ê·¸ëŸ°ë°)." },
            { id: 19, type: 'advanced', sentences: [{ kr: "ë²„ìŠ¤ë¥¼ íƒ”ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ lÃªn xe buÃ½t." }, { kr: "ì ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ ngá»§ thiáº¿p Ä‘i." }, { kr: "ì¢…ì ê¹Œì§€ ê°”ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ Ä‘i Ä‘áº¿n tráº¡m cuá»‘i." }, { kr: "ì§‘ì— ëŠ¦ê²Œ ì™”ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ vá» nhÃ  muá»™n." }], answers: ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "ê·¸ë˜ì„œ"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ì™œëƒí•˜ë©´"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ¬ë©´"]], explanation: "íƒ€ê³  ë‚˜ì„œ ì ë“¤ì—ˆìŠµë‹ˆë‹¤(ê·¸ë¦¬ê³ ). ì ë“¤ì–´ì„œ ì¢…ì ê¹Œì§€ ê°”ê³ (ê·¸ë˜ì„œ), ê·¸ ê²°ê³¼ ëŠ¦ì—ˆìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ)." },
            { id: 20, type: 'advanced', sentences: [{ kr: "ì‡¼í•‘ì„ í–ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ Ä‘i mua sáº¯m." }, { kr: "ëˆì„ ë‹¤ ì¼ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ tiÃªu háº¿t tiá»n." }, { kr: "ë°°ê°€ ê³ íŒ ìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã³i bá»¥ng." }, { kr: "ë°¥ì„ ë¨¹ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.", vn: "TÃ´i Ä‘Ã£ khÃ´ng thá»ƒ Äƒn cÆ¡m." }], answers: ["ê·¸ë˜ì„œ", "ê·¸ëŸ°ë°", "ê·¸ë˜ì„œ"], options: [["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ¬ë©´"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ê·¸ëŸ°ë°"], ["ê·¸ë¦¬ê³ ", "ê·¸ë˜ì„œ", "í•˜ì§€ë§Œ", "ì™œëƒí•˜ë©´"]], explanation: "ì‡¼í•‘ì„ í•´ì„œ ëˆì„ ë‹¤ ì¼ìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ). ëˆì´ ì—†ëŠ”ë° ë°°ê°€ ê³ í”ˆ ìƒí™©ì´ ë˜ì—ˆìŠµë‹ˆë‹¤(ê·¸ëŸ°ë°). ëˆì´ ì—†ì–´ì„œ ëª» ë¨¹ì—ˆìŠµë‹ˆë‹¤(ê·¸ë˜ì„œ)." }
        ];

        const allQuestions = [...basicQuestions, ...advancedQuestions];

        // --- State ---
        let state = {
            currentStep: 0,
            score: 0,
            showFeedback: false,
            isCorrect: false,
            selectedOptions: {}, // { 0: "ê·¸ë¦¬ê³ ", 1: "ê·¸ë˜ì„œ" ... }
            answerHistory: [] // [{ id: 1, isCorrect: true, userSelection: [], explanation: "" }, ...]
        };

        const app = document.getElementById('app');

        // --- Methods ---
        function handleSelect(option, index) {
            if (state.showFeedback) return;
            state.selectedOptions[index] = option;
            render();
        }

        function checkAnswer() {
            const currentQ = allQuestions[state.currentStep];
            const slotsNeeded = currentQ.type === 'basic' ? 1 : 3;
            
            // Validate completeness
            if (Object.keys(state.selectedOptions).length < slotsNeeded) return;

            let correct = true;
            let userSelectionArray = [];
            for (let i = 0; i < slotsNeeded; i++) {
                userSelectionArray.push(state.selectedOptions[i]);
                if (state.selectedOptions[i] !== currentQ.answers[i]) {
                    correct = false;
                }
            }

            // Save history
            state.answerHistory.push({
                id: currentQ.id,
                type: currentQ.type,
                isCorrect: correct,
                userSelection: userSelectionArray,
                correctSelection: currentQ.answers,
                explanation: currentQ.explanation,
                title: currentQ.sentences[0].kr // Use first sentence as title
            });

            state.isCorrect = correct;
            if (correct) state.score += 1;
            state.showFeedback = true;
            render();
            
            setTimeout(() => {
                const feedbackEl = document.getElementById('feedback-section');
                if(feedbackEl) feedbackEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
        }

        function nextQuestion() {
            state.showFeedback = false;
            state.selectedOptions = {};
            state.isCorrect = false;
            state.currentStep += 1;
            window.scrollTo(0, 0);
            render();
        }

        function restartQuiz() {
            state.currentStep = 0;
            state.score = 0;
            state.showFeedback = false;
            state.selectedOptions = {};
            state.isCorrect = false;
            state.answerHistory = [];
            window.scrollTo(0, 0);
            render();
        }

        // --- Render Helpers ---
        function renderHeader() {
            const progress = ((state.currentStep + 1) / allQuestions.length) * 100;
            return `
                <div class="fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-sm z-50 px-4 py-3 border-b border-slate-200 shadow-sm flex items-center justify-between max-w-md mx-auto">
                    <span class="font-bold text-slate-800 text-lg">
                        ë¬¸ì œ ${state.currentStep + 1}
                        <span class="text-slate-400 text-sm font-normal ml-1">/ ${allQuestions.length}</span>
                    </span>
                    <div class="h-2 w-24 bg-slate-200 rounded-full overflow-hidden">
                        <div class="h-full bg-blue-600 transition-all duration-300" style="width: ${progress}%"></div>
                    </div>
                </div>
            `;
        }

        function renderConnector(index, currentQ) {
            const userAns = state.selectedOptions[index];
            const correctAns = currentQ.answers[index];
            const isSlotCorrect = userAns === correctAns;

            if (state.showFeedback) {
                return `
                    <div class="relative z-20 my-2 flex justify-center">
                        <div class="px-4 py-2 rounded-lg border-2 font-bold text-lg shadow-sm ${isSlotCorrect ? 'border-green-500 bg-green-50 text-green-700' : 'border-red-500 bg-red-50 text-red-700'}">
                            ${userAns}
                            ${!isSlotCorrect ? `<span class="block text-xs font-normal text-slate-500 mt-1">ì •ë‹µ: ${correctAns}</span>` : ''}
                        </div>
                    </div>
                `;
            } else {
                const optionsHtml = currentQ.options[index].map(opt => {
                    const isSelected = state.selectedOptions[index] === opt;
                    return `
                        <button onclick="handleSelect('${opt}', ${index})" 
                            class="py-3 px-1 rounded-lg text-base font-bold transition-all ${isSelected ? 'bg-blue-600 text-white shadow-md transform scale-105' : 'bg-white text-slate-600 border border-slate-200 active:bg-slate-100'}">
                            ${opt}
                        </button>
                    `;
                }).join('');

                return `
                    <div class="relative z-20 my-2">
                        <div class="grid grid-cols-2 gap-2 bg-slate-100 p-2 rounded-xl">
                            ${optionsHtml}
                        </div>
                    </div>
                `;
            }
        }

        function renderQuestionCard(currentQ) {
            const arrowIcon = `<div class="flex justify-center items-center py-2 text-slate-300"><i data-lucide="arrow-down" class="w-5 h-5"></i></div>`;
            
            let contentHtml = '';
            
            // Sentence 1
            contentHtml += `
                <div class="relative z-10 bg-blue-50/50 p-4 rounded-xl border border-blue-100 mb-2 text-center shadow-sm">
                    <p class="text-xl font-bold text-slate-800 mb-1 break-keep">${currentQ.sentences[0].kr}</p>
                    <p class="text-sm text-slate-500">${currentQ.sentences[0].vn}</p>
                </div>
            `;

            // Connector 0
            contentHtml += `
                <div class="relative z-10">
                    ${arrowIcon}
                    ${renderConnector(0, currentQ)}
                    ${arrowIcon}
                </div>
            `;

            // Sentence 2
            contentHtml += `
                <div class="relative z-10 bg-blue-50/50 p-4 rounded-xl border border-blue-100 mb-2 text-center shadow-sm">
                    <p class="text-xl font-bold text-slate-800 mb-1 break-keep">${currentQ.sentences[1].kr}</p>
                    <p class="text-sm text-slate-500">${currentQ.sentences[1].vn}</p>
                </div>
            `;

            // Advanced parts
            if (currentQ.type === 'advanced') {
                // Connector 1
                contentHtml += `
                    <div class="relative z-10">
                        ${arrowIcon}
                        ${renderConnector(1, currentQ)}
                        ${arrowIcon}
                    </div>
                `;
                // Sentence 3
                contentHtml += `
                    <div class="relative z-10 bg-purple-50/50 p-4 rounded-xl border border-purple-100 mb-2 text-center shadow-sm">
                        <p class="text-xl font-bold text-slate-800 mb-1 break-keep">${currentQ.sentences[2].kr}</p>
                        <p class="text-sm text-slate-500">${currentQ.sentences[2].vn}</p>
                    </div>
                `;
                // Connector 2
                contentHtml += `
                    <div class="relative z-10">
                        ${arrowIcon}
                        ${renderConnector(2, currentQ)}
                        ${arrowIcon}
                    </div>
                `;
                // Sentence 4
                contentHtml += `
                    <div class="relative z-10 bg-purple-50/50 p-4 rounded-xl border border-purple-100 mb-2 text-center shadow-sm">
                        <p class="text-xl font-bold text-slate-800 mb-1 break-keep">${currentQ.sentences[3].kr}</p>
                        <p class="text-sm text-slate-500">${currentQ.sentences[3].vn}</p>
                    </div>
                `;
            }

            return `
                <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden mt-20 mb-4 mx-4">
                    <div class="p-5 flex flex-col relative">
                        <!-- Vertical Line -->
                        <div class="absolute left-1/2 top-10 bottom-10 w-0.5 bg-slate-100 -translate-x-1/2 z-0 hidden sm:block"></div>
                        ${contentHtml}
                    </div>
                </div>
            `;
        }

        function renderFeedback(currentQ) {
            if (!state.showFeedback) return '';
            
            const isCorrect = state.isCorrect;
            return `
                <div id="feedback-section" class="mx-4 mb-24 rounded-xl p-5 border-2 animate-fade-in ${isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}">
                    <div class="flex items-center gap-2 mb-2">
                        <i data-lucide="${isCorrect ? 'check-circle' : 'x-circle'}" class="${isCorrect ? 'text-green-600' : 'text-red-600'} w-6 h-6"></i>
                        <span class="font-bold text-lg ${isCorrect ? 'text-green-700' : 'text-red-700'}">
                            ${isCorrect ? "ì •ë‹µì…ë‹ˆë‹¤!" : "ë‹¤ì‹œ í™•ì¸í•´ë³´ì„¸ìš”."}
                        </span>
                    </div>
                    <p class="text-slate-700 text-sm leading-relaxed bg-white/60 p-3 rounded-lg border border-black/5">
                        ${currentQ.explanation}
                    </p>
                </div>
            `;
        }

        function renderBottomBar(currentQ) {
            const slotsNeeded = currentQ.type === 'basic' ? 1 : 3;
            const isReady = Object.keys(state.selectedOptions).length >= slotsNeeded;
            
            let buttonHtml = '';

            if (!state.showFeedback) {
                buttonHtml = `
                    <button onclick="checkAnswer()" ${!isReady ? 'disabled' : ''}
                        class="w-full py-4 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-bold rounded-xl text-lg shadow-lg active:scale-95 transition-all">
                        ì •ë‹µ í™•ì¸
                    </button>
                `;
            } else {
                const isSuccess = state.isCorrect;
                buttonHtml = `
                    <button onclick="nextQuestion()"
                        class="w-full py-4 rounded-xl font-bold text-white text-lg flex items-center justify-center gap-2 shadow-lg active:scale-95 transition-all ${isSuccess ? 'bg-green-600' : 'bg-red-500'}">
                        ë‹¤ìŒ ë¬¸ì œ <i data-lucide="chevron-right"></i>
                    </button>
                `;
            }

            return `
                <div class="fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-slate-200 z-50 max-w-md mx-auto">
                    ${buttonHtml}
                </div>
            `;
        }

        function renderReviewList() {
            return state.answerHistory.map((item, idx) => {
                const isCorrect = item.isCorrect;
                
                // ì •ë‹µ(íŒŒë€ìƒ‰) vs ì˜¤ë‹µ(ë¶‰ì€ìƒ‰) ì¹´ë“œ ìŠ¤íƒ€ì¼
                const borderColor = isCorrect ? 'border-blue-100 bg-blue-50' : 'border-red-200 bg-red-50';
                const icon = isCorrect 
                    ? `<i data-lucide="check" class="text-blue-500 w-5 h-5"></i>` 
                    : `<i data-lucide="x" class="text-red-500 w-5 h-5"></i>`;
                
                // ì˜¤ë‹µì¼ ë•Œë§Œ ì‚¬ìš©ì ë‹µì•ˆ vs ì •ë‹µ ë¹„êµ í‘œì‹œ
                let comparisonHtml = '';
                if (!isCorrect) {
                    comparisonHtml = `
                        <div class="mt-3 bg-white/60 p-3 rounded-lg text-sm space-y-2">
                            <div class="flex items-start gap-2">
                                <span class="font-bold text-red-600 shrink-0 w-16">ë‚˜ì˜ ë‹µ:</span>
                                <span class="text-slate-700">${item.userSelection.join(', ')}</span>
                            </div>
                            <div class="flex items-start gap-2">
                                <span class="font-bold text-green-600 shrink-0 w-16">ì •ë‹µ:</span>
                                <span class="text-slate-800 font-bold">${item.correctSelection.join(', ')}</span>
                            </div>
                        </div>
                    `;
                }

                return `
                    <div class="border ${borderColor} rounded-xl p-4 mb-3">
                        <div class="flex justify-between items-start mb-1">
                            <div class="flex items-center gap-2">
                                <span class="text-slate-500 font-bold text-sm">#${idx + 1}</span>
                                ${icon}
                            </div>
                            <span class="text-xs text-slate-400 font-medium">${item.type === 'basic' ? 'ê¸°ì´ˆ' : 'ì‹¬í™”'}</span>
                        </div>
                        
                        <p class="font-medium text-slate-800 text-sm mb-2">"${item.title}..."</p>
                        
                        ${comparisonHtml}

                        <!-- ì˜¤ë‹µì´ê±°ë‚˜ ì •ë‹µì´ì–´ë„ í•´ì„¤ì„ ë³´ê³  ì‹¶ì„ ìˆ˜ ìˆìœ¼ë‹ˆ í•­ìƒ í‘œì‹œ (ì˜¤ë‹µì€ ë” ê°•ì¡°) -->
                        <div class="mt-2 text-xs text-slate-600 leading-relaxed ${isCorrect ? 'text-slate-500' : 'font-medium text-slate-700'}">
                            ğŸ’¡ ${item.explanation}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderCompletion() {
            const isHighScorer = state.score >= 18;
            return `
                <div class="min-h-screen bg-white flex flex-col p-6 font-sans">
                    <div class="w-full max-w-sm mx-auto text-center mb-8 pt-8">
                        <div class="w-24 h-24 ${isHighScorer ? 'bg-yellow-100' : 'bg-blue-100'} rounded-full flex items-center justify-center text-5xl mx-auto mb-4 ${isHighScorer ? 'animate-bounce' : ''}">
                            ${isHighScorer ? 'ğŸ†' : 'ğŸ‘'}
                        </div>
                        <h2 class="text-2xl font-bold text-slate-800 mb-1">í•™ìŠµ ì™„ë£Œ!</h2>
                        <p class="text-slate-500 text-sm mb-6">ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³  ë¶€ì¡±í•œ ë¶€ë¶„ì„ ë³µìŠµí•˜ì„¸ìš”.</p>
                        
                        <div class="bg-slate-50 rounded-2xl p-6 border border-slate-100 mb-8">
                            <p class="text-slate-600 mb-1 text-sm">ì´ ì ìˆ˜</p>
                            <p class="text-4xl font-bold text-blue-600">${state.score} / ${allQuestions.length}</p>
                        </div>

                        <!-- Review Section -->
                        <div class="text-left mb-6">
                            <h3 class="font-bold text-slate-800 mb-3 flex items-center gap-2">
                                <i data-lucide="book-open" class="w-5 h-5 text-blue-600"></i>
                                ìƒì„¸ í•™ìŠµ ë¦¬ë·°
                            </h3>
                            <div class="space-y-3">
                                ${renderReviewList()}
                            </div>
                        </div>

                        <button onclick="restartQuiz()"
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl flex items-center justify-center gap-2 text-lg shadow-lg active:scale-95 transition-transform sticky bottom-6">
                            <i data-lucide="refresh-cw"></i>
                            ë‹¤ì‹œ ì‹œì‘í•˜ê¸°
                        </button>
                    </div>
                </div>
            `;
        }

        // --- Main Render Function ---
        function render() {
            if (state.currentStep >= allQuestions.length) {
                app.innerHTML = renderCompletion();
            } else {
                const currentQ = allQuestions[state.currentStep];
                app.innerHTML = `
                    ${renderHeader()}
                    ${renderQuestionCard(currentQ)}
                    ${renderFeedback(currentQ)}
                    ${renderBottomBar(currentQ)}
                `;
            }
            lucide.createIcons();
        }

        // Initial Render
        render();

    </script>
</body>
</html>

