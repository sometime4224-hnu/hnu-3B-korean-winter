<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì£¼ê±° ìƒí™œ ì–´íœ˜ í€´ì¦ˆ</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Inter í°íŠ¸ ì¶”ê°€ */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
        }
        /* ì„ íƒ ì˜µì…˜ ìŠ¤íƒ€ì¼ */
        .option.selected {
            background-color: #dbeafe; /* blue-100 */
            border-color: #60a5fa; /* blue-400 */
        }
        /* ì •ë‹µ ìŠ¤íƒ€ì¼ */
        .option.correct {
            background-color: #dcfce7; /* green-100 */
            border-color: #4ade80; /* green-400 */
            color: #166534; /* green-800 */
        }
        /* ì˜¤ë‹µ ìŠ¤íƒ€ì¼ */
        .option.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #f87171; /* red-400 */
            color: #991b1b; /* red-800 */
        }
        /* ì˜µì…˜ ë¹„í™œì„±í™” */
        .options-disabled .option {
            pointer-events: none;
            opacity: 0.8;
        }
        /* í”¼ë“œë°± ì•„ì´í…œ ìŠ¤íƒ€ì¼ */
        .feedback-item {
            background-color: #f9fafb; /* gray-50 */
            border: 1px solid #e5e7eb; /* gray-200 */
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }
        .feedback-item .question {
            font-weight: 600;
            color: #374151; /* gray-700 */
            margin-bottom: 8px;
        }
        .feedback-item .incorrect-answer {
            color: #dc2626; /* red-600 */
        }
        .feedback-item .correct-answer {
            color: #16a34a; /* green-600 */
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="bg-white p-6 md:p-10 rounded-2xl shadow-xl w-full max-w-2xl">
        
        <!-- 1. ì‹œì‘ ì»¨í…Œì´ë„ˆ -->
        <div id="start-container">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800 text-center">ğŸ  ì£¼ê±° ìƒí™œ ì–´íœ˜ í€´ì¦ˆ</h1>
            <p class="text-gray-600 my-6 text-center text-lg">ì´ 25ê°œì˜ ë¬¸ì œê°€ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>ì¤€ë¹„ê°€ ë˜ë©´ í€´ì¦ˆë¥¼ ì‹œì‘í•˜ì„¸ìš”!</p>
            <button id="start-btn" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg text-lg font-semibold hover:bg-blue-700 transition duration-300 shadow-md">
                í€´ì¦ˆ ì‹œì‘í•˜ê¸°
            </button>
            
            <div id="history-container" class="mt-10">
                <h2 class="text-xl font-bold text-gray-800 mb-4">ì´ì „ ì‘ì‹œ ê¸°ë¡</h2>
                <ul id="history-list" class="space-y-2 max-h-48 overflow-y-auto pr-2">
                    <!-- JavaScriptë¡œ ê¸°ë¡ì´ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
                </ul>
            </div>
        </div>

        <!-- 2. í€´ì¦ˆ ì»¨í…Œì´ë„ˆ (ê¸°ë³¸ ìˆ¨ê¹€) -->
        <div id="quiz-container" class="hidden">
            <!-- í—¤ë” -->
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-2xl md:text-3xl font-bold text-gray-800">ğŸ  ì£¼ê±° ìƒí™œ ì–´íœ˜ í€´ì¦ˆ</h1>
                <div id="score-container" class="text-lg font-semibold text-blue-600 bg-blue-100 px-4 py-2 rounded-lg">
                    <span id="current-question-number">1</span> / <span id="total-questions">25</span>
                </div>
            </div>
            
            <!-- ì§ˆë¬¸ -->
            <div id="question-container" class="mb-6">
                <p id="question-text" class="text-xl md:text-2xl font-medium text-gray-700 leading-relaxed"></p>
            </div>
            
            <!-- ì„ íƒì§€ -->
            <ul id="options-list" class="space-y-3">
                <!-- JavaScriptë¡œ ì˜µì…˜ì´ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
            </ul>
            
            <!-- ë‹¤ìŒ ë²„íŠ¼ -->
            <button id="next-btn" class="hidden mt-8 w-full bg-blue-600 text-white py-3 px-6 rounded-lg text-lg font-semibold hover:bg-blue-700 transition duration-300 shadow-md">
                ë‹¤ìŒ ë¬¸ì œ
            </button>
        </div>
        
        <!-- 3. ê²°ê³¼ ì»¨í…Œì´ë„ˆ (ê¸°ë³¸ ìˆ¨ê¹€) -->
        <div id="results-container" class="hidden text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">í€´ì¦ˆ ì™„ë£Œ!</h2>
            <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
                <p class="text-xl text-gray-700">ì´ <span id="total-questions-result" class="font-bold text-blue-600">25</span>ë¬¸ì œ ì¤‘</p>
                <p id="final-score" class="text-6xl font-extrabold text-blue-600 my-4">0</p>
                <p class="text-xl text-gray-700">ë¬¸ì œë¥¼ ë§í˜”ìŠµë‹ˆë‹¤!</p>
            </div>

            <!-- í‹€ë¦° ë¬¸ì œ í”¼ë“œë°± -->
            <div id="incorrect-feedback-container" class="mt-6 text-left">
                <!-- JavaScriptë¡œ í”¼ë“œë°±ì´ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>

            <button id="restart-btn" class="mt-8 w-full bg-blue-600 text-white py-3 px-6 rounded-lg text-lg font-semibold hover:bg-blue-700 transition duration-300 shadow-md">
                ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
        </div>

    </div>

    <script>
        // í€´ì¦ˆ ë°ì´í„°
        const quizData = [
            // ì§‘ ë¬¸ì œ
            {
                question: "ì•„ì¹¨ì— ì¼ì–´ë‚˜ì„œ ì”»ìœ¼ë ¤ê³  í–ˆëŠ”ë°, ê°‘ìê¸° ( ) ì„¸ìˆ˜ë¥¼ ëª» í–ˆì–´ìš”.",
                options: ["ìˆ˜ë—ë¬¼ì´ ì•ˆ ë‚˜ì™€ì„œ", "ì „ê¸°ê°€ ë‚˜ê°€ì„œ", "ë³€ê¸°ê°€ ë§‰í˜€ì„œ", "ë‚œë°©ì´ ì•ˆ ë¼ì„œ"],
                answer: 0
            },
            {
                question: "ì–´ì ¯ë°¤ì— íƒœí’ ë•Œë¬¸ì— ê°‘ìê¸° ( ) ì»´í“¨í„°ë¡œ í•˜ë˜ ì‘ì—…ì„ ì €ì¥í•˜ì§€ ëª»í–ˆì–´ìš”.",
                options: ["ë¬¼ì´ ìƒˆì„œ", "ì „ê¸°ê°€ ë‚˜ê°€ì„œ", "ì†ŒìŒì´ ì‹¬í•´ì„œ", "ë¬¼ì´ ì•ˆ ë‚´ë ¤ê°€ì„œ"],
                answer: 1
            },
            {
                question: "í™”ì¥ì‹¤ ( ) ë¬¼ì´ ë‚´ë ¤ê°€ì§€ ì•Šì•„ì„œ ê³¤ë€í•´ìš”. ì‚¬ëŒì„ ë¶ˆëŸ¬ì„œ ëš«ì–´ì•¼ê² ì–´ìš”.",
                options: ["ì „ê¸°ê°€ ë‚˜ê°€ì„œ", "ë‚œë°©ì´ ì•ˆ ë¼ì„œ", "ë³€ê¸°ê°€ ë§‰í˜€ì„œ", "ëƒ„ìƒˆê°€ ë‚˜ì„œ"],
                answer: 2
            },
            {
                question: "ì²œì¥ì—ì„œ ( ) ë°”ë‹¥ì´ ë‹¤ ì –ì—ˆì–´ìš”. ìœ„ì¸µì— í™•ì¸í•´ ë´ì•¼ê² ì–´ìš”.",
                options: ["ë¬¼ì´ ìƒˆì„œ", "ì†ŒìŒì´ ì‹¬í•´ì„œ", "ì „ê¸°ê°€ ë‚˜ê°€ì„œ", "ë¬¼ì´ ì•ˆ ë‚´ë ¤ê°€ì„œ"],
                answer: 0
            },
            {
                question: "ìœ„ì¸µì—ì„œ ëŠ¦ì€ ë°¤ê¹Œì§€ ê³µì‚¬í•˜ëŠ”ì§€ ( ) ì ì„ ì˜ ìˆ˜ê°€ ì—†ì–´ìš”.",
                options: ["ë‚œë°©ì´ ì•ˆ ë¼ì„œ", "ë¬¼ì´ ì•ˆ ë‚´ë ¤ê°€ì„œ", "ì†ŒìŒì´ ì‹¬í•´ì„œ", "ëƒ„ìƒˆê°€ ë‚˜ì„œ"],
                answer: 2
            },
            {
                question: "ê²¨ìš¸ì¸ë° ( ) ì§‘ì´ ë„ˆë¬´ ì¶”ì›Œìš”. ë³´ì¼ëŸ¬ê°€ ê³ ì¥ ë‚¬ë‚˜ ë´ìš”.",
                options: ["ìˆ˜ë—ë¬¼ì´ ì•ˆ ë‚˜ì™€ì„œ", "ë‚œë°©ì´ ì•ˆ ë¼ì„œ", "ë³€ê¸°ê°€ ë§‰í˜€ì„œ", "ì†ŒìŒì´ ì‹¬í•´ì„œ"],
                answer: 1
            },
            {
                question: "ë¶€ì—Œ í•˜ìˆ˜êµ¬ì—ì„œ ( ) í™˜ê¸°ë¥¼ ì‹œì¼œì•¼ê² ì–´ìš”.",
                options: ["ì´ìƒí•œ ëƒ„ìƒˆê°€ ë‚˜ì„œ", "ë¬¼ì´ ìƒˆì„œ", "ì „ê¸°ê°€ ë‚˜ê°€ì„œ", "ê³„ì•½ ê¸°ê°„ì´ë¼ì„œ"],
                answer: 0
            },
            {
                question: "ì„¤ê±°ì§€ë¥¼ í•˜ëŠ”ë° ì‹±í¬ëŒ€ì— ( ) ë§‰íŒ ê²ƒ ê°™ì•„ìš”.",
                options: ["ë¬¼ì´ ì•ˆ ë‚´ë ¤ê°€ì„œ", "ë‚œë°©ì´ ì•ˆ ë¼ì„œ", "ì†ŒìŒì´ ì‹¬í•´ì„œ", "ì „ê¸°ê°€ ë‚˜ê°€ì„œ"],
                answer: 0
            },
            // ê³„ì•½ ë° ìš”ê¸ˆ
            {
                question: "ì´ì‚¬í•  ì§‘ì„ ì •í•˜ê³  ì§‘ì£¼ì¸ê³¼ ( )ë¥¼ ê¼¼ê¼¼íˆ ì½ì–´ë³¸ í›„ ë„ì¥ì„ ì°ì—ˆì–´ìš”.",
                options: ["ê³„ì•½ì„œ", "ë³´ì¦ê¸ˆ", "ê³µê³¼ê¸ˆ", "ì—°ì²´ë£Œ"],
                answer: 0
            },
            {
                question: "ì´ ì§‘ì€ ( )ì´ 2ë…„ì´ë¼ì„œ 2ë…„ ë™ì•ˆ ì‚´ ìˆ˜ ìˆì–´ìš”.",
                options: ["ì—°ì²´ë£Œ", "ë³´ì¦ê¸ˆ", "ê³„ì•½ ê¸°ê°„", "ê³µê³¼ê¸ˆ"],
                answer: 2
            },
            {
                question: "ë§ˆìŒì— ë“œëŠ” ì§‘ì„ ì°¾ì•„ì„œ ë¶€ë™ì‚°ì—ì„œ ì§‘ì£¼ì¸ê³¼ ( ).",
                options: ["ë‚©ë¶€í•˜ê¸°ë¡œ í–ˆë‹¤", "ê³„ì•½í•˜ê¸°ë¡œ í–ˆë‹¤", "í¬í•¨í•˜ê¸°ë¡œ í–ˆë‹¤", "ë°€ë¦¬ê¸°ë¡œ í–ˆë‹¤"],
                answer: 1
            },
            {
                question: "ì›”ì„¸ ê³„ì•½ì„ í•  ë•Œ ì§‘ì£¼ì¸ì—ê²Œ ë§¡ê¸°ëŠ” í°ëˆì„ ( )ì´ë¼ê³  í•©ë‹ˆë‹¤.",
                options: ["ì—°ì²´ë£Œ", "ê³µê³¼ê¸ˆ", "ì›”ì„¸", "ë³´ì¦ê¸ˆ"],
                answer: 3
            },
            {
                question: "ë§¤ë‹¬ ì›”ì„¸ë¿ë§Œ ì•„ë‹ˆë¼ ì „ê¸° ìš”ê¸ˆ, ìˆ˜ë„ ìš”ê¸ˆ ê°™ì€ ( )ë„ ë‚´ì•¼ í•´ìš”.",
                options: ["ë³´ì¦ê¸ˆ", "ì—°ì²´ë£Œ", "ê³µê³¼ê¸ˆ", "ê³„ì•½ì„œ"],
                answer: 2
            },
            {
                question: "ê´€ë¦¬ë¹„ë¥¼ ì œë•Œ ë‚´ì§€ ëª»í•˜ë©´ ( )ê°€ ë¶™ì–´ì„œ ëˆì„ ë” ë‚´ì•¼ í•´ìš”.",
                options: ["ì—°ì²´ë£Œ", "ë³´ì¦ê¸ˆ", "ê³„ì•½ ê¸°ê°„", "ê³µê³¼ê¸ˆ"],
                answer: 0
            },
            {
                question: "ì´ ì›”ì„¸ì—ëŠ” ê´€ë¦¬ë¹„ê°€ ( ) ìˆì–´ì„œ ë”°ë¡œ ë‚¼ í•„ìš”ê°€ ì—†ì–´ìš”.",
                options: ["ë°€ë ¤", "ë‚©ë¶€ë˜ì–´", "í¬í•¨ë˜ì–´", "ê³„ì•½ë˜ì–´"],
                answer: 2
            },
            {
                question: "ì´ë²ˆ ë‹¬ ê³µê³¼ê¸ˆì€ ë§ˆê°ì¼ ì „ì— ì€í–‰ ì•±ì„ í†µí•´ ( ).",
                options: ["ë‚©ë¶€í–ˆë‹¤", "ë°€ë ¸ë‹¤", "í¬í•¨í–ˆë‹¤", "ê³„ì•½í–ˆë‹¤"],
                answer: 0
            },
            {
                question: "ì‚¬ì •ì´ ìƒê²¨ì„œ ì›”ì„¸ê°€ ë‘ ë‹¬ì´ë‚˜ ( ). ì§‘ì£¼ì¸ì—ê²Œ ì—°ë½í•´ì•¼ê² ë‹¤.",
                options: ["ë‚©ë¶€í–ˆë‹¤", "ë°€ë ¸ë‹¤", "í¬í•¨ëë‹¤", "ê³„ì•½í–ˆë‹¤"],
                answer: 1
            },
            // ìˆ˜ì… ë° ì§€ì¶œ
            {
                question: "ì´ë²ˆ ë‹¬ì€ ì¹œêµ¬ë“¤ ì„ ë¬¼ì„ ì‚¬ê³  ì—¬í–‰ë„ ë‹¤ë…€ì˜¤ëŠë¼ ( )ì´ ë§ì•˜ì–´ìš”.",
                options: ["ìˆ˜ì…", "ì§€ì¶œ", "ì €ì¶•", "ì ˆì•½"],
                answer: 1
            },
            {
                question: "ì•„ë¥´ë°”ì´íŠ¸ë¥¼ ìƒˆë¡œ ì‹œì‘í•´ì„œ ë§¤ë‹¬ 50ë§Œ ì›ì˜ ( )ì´ ë” ìƒê²¼ì–´ìš”.",
                options: ["ì§€ì¶œ", "ë‚­ë¹„", "ìˆ˜ì…", "ì €ì¶•"],
                answer: 2
            },
            {
                question: "ì›”ê¸‰ì´ ì˜¬ë¼ì„œ ì‘ë…„ë³´ë‹¤ ( )ì´ ëŠ˜ì—ˆë‹¤.",
                options: ["ìˆ˜ì…", "ì§€ì¶œ", "ë‚­ë¹„", "ì ˆì•½"],
                answer: 0
            },
            {
                question: "ì™¸ì‹ì„ ì•ˆ í•˜ê³  ì§‘ì—ì„œ ë°¥ì„ í•´ ë¨¹ìœ¼ë‹ˆê¹Œ ì‹ë¹„ ( )ì´ ë§ì´ ì¤„ì—ˆë‹¤.",
                options: ["ìˆ˜ì…", "ì €ì¶•", "ì ˆì•½", "ì§€ì¶œ"],
                answer: 3
            },
            {
                question: "ëˆì„ ëª¨ìœ¼ê¸° ìœ„í•´ íƒì‹œë¥¼ íƒ€ì§€ ì•Šê³  ë²„ìŠ¤ë¥¼ íƒ€ë©´ì„œ êµí†µë¹„ë¥¼ ( ).",
                options: ["ì•„ë¼ê³  ìˆë‹¤", "ë‚­ë¹„í•˜ê³  ìˆë‹¤", "ëŠ˜ë¦¬ê³  ìˆë‹¤", "ì €ì¶•í•˜ê³  ìˆë‹¤"],
                answer: 0
            },
            {
                question: "ì•ˆ ì“°ëŠ” ë°©ì˜ ë¶ˆì„ ë„ëŠ” ìŠµê´€ì€ ì „ê¸° ìš”ê¸ˆì„ ( ) ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.",
                options: ["ë‚­ë¹„í•˜ëŠ”", "ì ˆì•½í•˜ëŠ”", "ëŠ˜ë¦¬ëŠ”", "ì €ì¶•í•˜ëŠ”"],
                answer: 1
            },
            {
                question: "í•„ìš”í•˜ì§€ë„ ì•Šì€ ë¬¼ê±´ì„ ìê¾¸ ì‚¬ëŠ” ê²ƒì€ ëˆì„ ( )ëŠ” ìŠµê´€ì…ë‹ˆë‹¤.",
                options: ["ì €ì¶•í•˜ëŠ”", "ì•„ë¼ëŠ”", "ë‚­ë¹„í•˜ëŠ”", "ì¤„ì´ëŠ”"],
                answer: 2
            },
            {
                question: "ë§¤ë‹¬ ì›”ê¸‰ì˜ 30%ëŠ” ë¯¸ë˜ë¥¼ ìœ„í•´ ì€í–‰ì— ( )ê³  ìˆì–´ìš”.",
                options: ["ë‚­ë¹„í•˜ê³ ", "ì§€ì¶œí•˜ê³ ", "ì €ì¶•í•˜ê³ ", "ì¤„ì´ê³ "],
                answer: 2
            }
        ];

        // DOM ìš”ì†Œ
        const startContainer = document.getElementById('start-container');
        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results-container');
        
        const startBtn = document.getElementById('start-btn');
        const historyList = document.getElementById('history-list');

        const questionText = document.getElementById('question-text');
        const optionsList = document.getElementById('options-list');
        const nextBtn = document.getElementById('next-btn');
        
        const restartBtn = document.getElementById('restart-btn');
        const currentQuestionNumberEl = document.getElementById('current-question-number');
        const totalQuestionsEl = document.getElementById('total-questions');
        const totalQuestionsResultEl = document.getElementById('total-questions-result');
        const finalScoreEl = document.getElementById('final-score');
        const incorrectFeedbackContainer = document.getElementById('incorrect-feedback-container');

        // í€´ì¦ˆ ìƒíƒœ ë³€ìˆ˜
        let currentQuestionIndex = 0;
        let score = 0;
        let incorrectQuestions = []; // í‹€ë¦° ë¬¸ì œ ì¶”ì  ë°°ì—´

        // --- 1. ì‹œì‘ í™”ë©´ ê´€ë ¨ ---

        // ì‹œì‘ í™”ë©´ í‘œì‹œ
        function showStartScreen() {
            startContainer.classList.remove('hidden');
            quizContainer.classList.add('hidden');
            resultsContainer.classList.add('hidden');
            loadHistory();
        }

        // localStorageì—ì„œ ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('quizHistory')) || [];
            historyList.innerHTML = ''; // ëª©ë¡ ì´ˆê¸°í™”
            if (history.length === 0) {
                historyList.innerHTML = '<li class="text-gray-500 italic">ì•„ì§ ì‘ì‹œ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</li>';
            } else {
                const historyHtml = history.map(record => `
                    <li class="flex justify-between items-center bg-gray-50 p-3 rounded-lg border border-gray-200">
                        <span class="text-sm text-gray-700">${record.date}</span>
                        <span class="font-bold text-blue-600">${record.score} / ${record.total} ì </span>
                    </li>
                `).join('');
                historyList.innerHTML = historyHtml;
            }
        }

        // --- 2. í€´ì¦ˆ ì§„í–‰ ê´€ë ¨ ---
        
        // í€´ì¦ˆ ì´ˆê¸°í™” ë° ì‹œì‘
        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            incorrectQuestions = []; // í‹€ë¦° ë¬¸ì œ ë°°ì—´ ì´ˆê¸°í™”
            
            startContainer.classList.add('hidden');
            resultsContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');

            totalQuestionsEl.textContent = quizData.length;
            totalQuestionsResultEl.textContent = quizData.length;
            loadQuestion();
        }

        // ì§ˆë¬¸ ë¡œë“œ
        function loadQuestion() {
            // ì´ì „ ìƒíƒœ ì´ˆê¸°í™”
            optionsList.innerHTML = '';
            optionsList.classList.remove('options-disabled');
            nextBtn.classList.add('hidden');

            // í˜„ì¬ ì§ˆë¬¸ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            const currentQuestion = quizData[currentQuestionIndex];
            
            // ì§ˆë¬¸ í…ìŠ¤íŠ¸ ì„¤ì •
            questionText.textContent = currentQuestion.question;
            
            // ë¬¸ì œ ë²ˆí˜¸ ì—…ë°ì´íŠ¸
            currentQuestionNumberEl.textContent = currentQuestionIndex + 1;

            // ì„ íƒì§€ ìƒì„±
            currentQuestion.options.forEach((option, index) => {
                const li = document.createElement('li');
                li.textContent = option;
                li.classList.add('option', 'p-4', 'border-2', 'border-gray-300', 'rounded-lg', 'cursor-pointer', 'hover:bg-blue-50', 'transition', 'duration-200', 'text-gray-700', 'text-lg');
                li.dataset.index = index;
                li.addEventListener('click', selectOption);
                optionsList.appendChild(li);
            });
        }

        // ì„ íƒì§€ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
        function selectOption(e) {
            const selectedOption = e.target;
            const selectedIndex = parseInt(selectedOption.dataset.index);
            const currentQuestion = quizData[currentQuestionIndex];
            const correctIndex = currentQuestion.answer;

            // ëª¨ë“  ì˜µì…˜ ë¹„í™œì„±í™”
            optionsList.classList.add('options-disabled');

            // ì •ë‹µ/ì˜¤ë‹µ í™•ì¸ ë° ìŠ¤íƒ€ì¼ ì ìš©
            if (selectedIndex === correctIndex) {
                selectedOption.classList.add('correct');
                score++;
            } else {
                selectedOption.classList.add('incorrect');
                // ì˜¤ë‹µì¼ ê²½ìš° ì •ë‹µ í‘œì‹œ
                const correctOptionEl = optionsList.querySelector(`[data-index="${correctIndex}"]`);
                correctOptionEl.classList.add('correct');
                
                // í‹€ë¦° ë¬¸ì œ ì •ë³´ ì €ì¥
                incorrectQuestions.push({
                    question: currentQuestion.question,
                    selected: currentQuestion.options[selectedIndex],
                    correct: currentQuestion.options[correctIndex]
                });
            }

            // ë‹¤ìŒ ë²„íŠ¼ í‘œì‹œ
            nextBtn.classList.remove('hidden');
        }

        // ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        // --- 3. ê²°ê³¼ í™”ë©´ ê´€ë ¨ ---

        // ê²°ê³¼ í‘œì‹œ
        function showResults() {
            quizContainer.classList.add('hidden');
            resultsContainer.classList.remove('hidden');
            finalScoreEl.textContent = score;

            saveHistory();
            displayFeedback();
        }

        // ê²°ê³¼ localStorageì— ì €ì¥
        function saveHistory() {
            const newRecord = {
                date: new Date().toLocaleString('ko-KR', { dateStyle: 'short', timeStyle: 'short' }),
                score: score,
                total: quizData.length
            };
            let history = JSON.parse(localStorage.getItem('quizHistory')) || [];
            history.unshift(newRecord); // ìƒˆ ê¸°ë¡ì„ ë§¨ ì•ì— ì¶”ê°€
            history = history.slice(0, 10); // ìµœê·¼ 10ê°œë§Œ ì €ì¥
            localStorage.setItem('quizHistory', JSON.stringify(history));
        }

        // í‹€ë¦° ë¬¸ì œ í”¼ë“œë°± í‘œì‹œ
        function displayFeedback() {
            incorrectFeedbackContainer.innerHTML = ''; // ì´ˆê¸°í™”

            if (incorrectQuestions.length === 0) {
                incorrectFeedbackContainer.innerHTML = '<p class="text-lg text-green-600 font-semibold mt-6">ğŸ‰ ì™„ë²½í•´ìš”! í‹€ë¦° ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            } else {
                incorrectFeedbackContainer.innerHTML = '<h3 class="text-xl font-bold text-gray-800 mt-8 mb-4">í‹€ë¦° ë¬¸ì œ ë‹¤ì‹œë³´ê¸°</h3>';
                const feedbackHtml = incorrectQuestions.map(item => `
                    <div class="feedback-item">
                        <p class="question">${item.question}</p>
                        <p class="incorrect-answer"><b>ë‚˜ì˜ ì˜¤ë‹µ:</b> ${item.selected}</p>
                        <p class="correct-answer"><b>ì •ë‹µ:</b> ${item.correct}</p>
                    </div>
                `).join('');
                incorrectFeedbackContainer.innerHTML += feedbackHtml;
            }
        }


        // --- 4. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²° ---
        startBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', showStartScreen); // ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°

        // í€´ì¦ˆ ì‹œì‘ (í˜ì´ì§€ ë¡œë“œ ì‹œ)
        showStartScreen();
    </script>
</body>
</html>
