<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ëª¨ì§€ë¡œ ë°°ìš°ëŠ” í•œêµ­ì–´</title>
    <!-- Tailwind CSS ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter í°íŠ¸ ë¡œë“œ -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ê¸°ë³¸ í°íŠ¸ ì„¤ì • */
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
        }
        /* í™œì„± íƒ­ ìŠ¤íƒ€ì¼ */
        .tab-active {
            background-color: #2563eb; /* blue-600 */
            color: white;
        }
        /* ë¹„í™œì„± íƒ­ ìŠ¤íƒ€ì¼ */
        .tab-inactive {
            background-color: #e5e7eb; /* gray-200 */
            color: #374151; /* gray-700 */
        }
        /* í˜ì´ì§€ ìˆ¨ê¹€ */
        .page-hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-2xl bg-white rounded-xl shadow-lg overflow-hidden">
        <!-- ë„¤ë¹„ê²Œì´ì…˜ íƒ­ -->
        <nav class="flex">
            <button id="tab-learn" class="flex-1 p-4 text-lg font-bold tab-active" onclick="showPage('learn')">
                ğŸ“š ë°°ìš°ê¸°
            </button>
            <button id="tab-quiz" class="flex-1 p-4 text-lg font-bold tab-inactive" onclick="showPage('quiz')">
                ğŸ“ í€´ì¦ˆ
            </button>
        </nav>

        <!-- ========================== -->
        <!-- 1. ë°°ìš°ê¸° í˜ì´ì§€ (ì„¤ëª…) -->
        <!-- ========================== -->
        <div id="page-learn" class="p-6 md:p-8">
            <h1 class="text-2xl font-bold text-center mb-6 text-blue-600">ì´ëª¨ì§€ë¡œ ì–´íœ˜ ë°°ìš°ê¸°</h1>
            
            <!-- ë²ˆì—­ ë²„íŠ¼ -->
            <div class="flex justify-center space-x-2 mb-6">
                <button onclick="translateDescriptions('ko')" class="px-3 py-1 bg-blue-500 text-white rounded-full text-sm font-semibold shadow hover:bg-blue-600 transition">ğŸ‡°ğŸ‡· í•œêµ­ì–´</button>
                <button onclick="translateDescriptions('vi')" class="px-3 py-1 bg-green-500 text-white rounded-full text-sm font-semibold shadow hover:bg-green-600 transition">ğŸ‡»ğŸ‡³ ë² íŠ¸ë‚¨ì–´</button>
                <button onclick="translateDescriptions('zh')" class="px-3 py-1 bg-red-500 text-white rounded-full text-sm font-semibold shadow hover:bg-red-600 transition">ğŸ‡¨ğŸ‡³ ì¤‘êµ­ì–´</button>
                <button onclick="translateDescriptions('ja')" class="px-3 py-1 bg-purple-500 text-white rounded-full text-sm font-semibold shadow hover:bg-purple-600 transition">ğŸ‡¯ğŸ‡µ ì¼ë³¸ì–´</button>
            </div>

            <!-- ì–´íœ˜ ëª©ë¡ -->
            <div id="vocab-list" class="space-y-4">
                <!-- ì–´íœ˜ ì¹´ë“œëŠ” JavaScriptë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ========================== -->
        <!-- 2. í€´ì¦ˆ í˜ì´ì§€ -->
        <!-- ========================== -->
        <div id="page-quiz" class="p-6 md:p-8 page-hidden">
            <h1 class="text-2xl font-bold text-center mb-6 text-blue-600">OX í€´ì¦ˆ</h1>
            
            <div id="quiz-container" class="text-center">
                <!-- í€´ì¦ˆ ì§ˆë¬¸ ì˜ì—­ -->
                <div id="quiz-question" class="mb-6 p-6 bg-gray-100 rounded-lg">
                    <p class="text-6xl mb-4">ğŸ˜Œ</p>
                    <p class="text-xl font-semibold">"ë§ˆìŒì´ í¸ì•ˆí•´ì§€ë‹¤"</p>
                </div>

                <!-- í€´ì¦ˆ ì •ë‹µ/ì˜¤ë‹µ ë²„íŠ¼ -->
                <div class="flex justify-center space-x-4">
                    <button id="btn-correct" class="px-8 py-4 bg-green-500 text-white text-3xl font-bold rounded-lg shadow-lg hover:bg-green-600 transition transform hover:scale-105">
                        O (ë§ì•„ìš”)
                    </button>
                    <button id="btn-wrong" class="px-8 py-4 bg-red-500 text-white text-3xl font-bold rounded-lg shadow-lg hover:bg-red-600 transition transform hover:scale-105">
                        X (í‹€ë ¤ìš”)
                    </button>
                </div>

                <!-- í€´ì¦ˆ í”¼ë“œë°± -->
                <div id="quiz-feedback" class="mt-6 text-2xl font-bold h-8">
                    <!-- 'ì •ë‹µ!' ë˜ëŠ” 'í‹€ë ¸ì–´ìš”!' ë©”ì‹œì§€ -->
                </div>
            </div>

            <!-- í€´ì¦ˆ ê²°ê³¼ -->
            <div id="quiz-result" class="text-center page-hidden mt-8">
                <h2 class="text-3xl font-bold mb-4">í€´ì¦ˆ ë!</h2>
                <p class="text-xl mb-6">ì´ <span id="total-questions"></span> ë¬¸ì œ ì¤‘ <span id="correct-answers" class="font-bold text-blue-600"></span>ê°œë¥¼ ë§ì·„ì–´ìš”!</p>
                <button onclick="startQuiz()" class="px-6 py-3 bg-blue-600 text-white text-lg font-semibold rounded-lg shadow hover:bg-blue-700 transition">
                    ë‹¤ì‹œ í•˜ê¸° ğŸ”
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- ë°ì´í„°ë² ì´ìŠ¤ ---
        // ì–´íœ˜ ëª©ë¡ê³¼ ë²ˆì—­ ë°ì´í„°
        const vocabData = [
            {
                phrase: 'ë§ˆìŒì´ í¸ì•ˆí•´ì§€ë‹¤',
                emoji: 'ğŸ˜Œ',
                desc: {
                    ko: 'ê±±ì •ì´ ì—†ê³  ê¸°ë¶„ì´ ì¢‹ì•„ìš”.',
                    vi: 'KhÃ´ng lo láº¯ng vÃ  cáº£m tháº¥y tá»‘t.',
                    zh: 'æ²¡æœ‰æ‹…å¿ƒï¼Œå¿ƒæƒ…å¾ˆå¥½ã€‚',
                    ja: 'å¿ƒé…äº‹ãŒãªãã€æ°—åˆ†ãŒè‰¯ã„ã§ã™ã€‚'
                }
            },
            {
                phrase: 'ë§ˆìŒì— ì—¬ìœ ê°€ ìƒê¸°ë‹¤',
                emoji: 'â˜•ï¸',
                desc: {
                    ko: 'ë°”ì˜ì§€ ì•Šê³  ìƒê°ì´ ë§ì§€ ì•Šì•„ìš”.',
                    vi: 'KhÃ´ng báº­n rá»™n vÃ  khÃ´ng cÃ³ nhiá»u suy nghÄ©.',
                    zh: 'ä¸å¿™ï¼Œæ€ç»ªä¸æ‚ã€‚',
                    ja: 'å¿™ã—ããªãã€ä½™è¨ˆãªã“ã¨ã‚’è€ƒãˆã¾ã›ã‚“ã€‚'
                }
            },
            {
                phrase: 'ì‹ ì´ ë‚˜ë‹¤',
                emoji: 'ğŸ¥³',
                desc: {
                    ko: 'ì•„ì£¼ ì¬ë¯¸ìˆê³  ê¸°ë¶„ì´ ì¢‹ì•„ìš”.',
                    vi: 'Ráº¥t vui vÃ  cáº£m tháº¥y tuyá»‡t vá»i.',
                    zh: 'éå¸¸æœ‰è¶£ï¼Œå¿ƒæƒ…å¾ˆå¥½ã€‚',
                    ja: 'ã¨ã¦ã‚‚æ¥½ã—ãã¦æ°—åˆ†ãŒè‰¯ã„ã§ã™ã€‚'
                }
            },
            {
                phrase: 'í˜ì´ ë‚˜ë‹¤',
                emoji: 'ğŸ’ª',
                desc: {
                    ko: 'ì—ë„ˆì§€ê°€ ìƒê²¨ìš”. ë¬´ì—‡ì´ë“  í•  ìˆ˜ ìˆì–´ìš”.',
                    vi: 'Cáº£m tháº¥y cÃ³ nÄƒng lÆ°á»£ng. CÃ³ thá»ƒ lÃ m báº¥t cá»© Ä‘iá»u gÃ¬.',
                    zh: 'å……æ»¡æ´»åŠ›ã€‚ä»€ä¹ˆéƒ½èƒ½åšã€‚',
                    ja: 'åŠ›ãŒæ¹§ã„ã¦ãã¾ã™ã€‚ä½•ã§ã‚‚ã§ãã¾ã™ã€‚'
                }
            },
            {
                phrase: 'ê°€ìŠ´ì´ ë›°ë‹¤',
                emoji: 'ğŸ’“',
                desc: {
                    ko: 'ë†€ë¼ê±°ë‚˜ ê¸°ëŒ€í•´ì„œ ì‹¬ì¥ì´ "ì¿µì¿µ" ì†Œë¦¬ë¥¼ ë‚´ìš”.',
                    vi: 'TrÃ¡i tim Ä‘áº­p "thÃ¬nh thá»‹ch" vÃ¬ ngáº¡c nhiÃªn hoáº·c mong Ä‘á»£i.',
                    zh: 'å› ä¸ºæƒŠè®¶æˆ–æœŸå¾…ï¼Œå¿ƒè„â€œæ€¦æ€¦â€ç›´è·³ã€‚',
                    ja: 'é©šã„ãŸã‚ŠæœŸå¾…ã—ãŸã‚Šã—ã¦ã€å¿ƒè‡“ãŒã€Œãƒ‰ã‚­ãƒ‰ã‚­ã€ã—ã¾ã™ã€‚'
                }
            },
            {
                phrase: 'ë§ˆìŒì´ ì„¤ë ˆë‹¤',
                emoji: 'ğŸ¥°',
                desc: {
                    ko: 'ì¢‹ì€ ì¼ì„ ê¸°ë‹¤ë¦´ ë•Œ ê¸°ë¶„ì´ ì¢‹ê³  ê¸°ëŒ€ë¼ìš”.',
                    vi: 'Cáº£m tháº¥y tá»‘t vÃ  mong Ä‘á»£i khi chá» Ä‘á»£i Ä‘iá»u gÃ¬ Ä‘Ã³ tá»‘t Ä‘áº¹p.',
                    zh: 'æœŸå¾…å¥½äº‹å‘ç”Ÿæ—¶ï¼Œå¿ƒæƒ…å¾ˆå¥½ï¼Œå¾ˆæ¿€åŠ¨ã€‚',
                    ja: 'è‰¯ã„ã“ã¨ã‚’å¾…ã£ã¦ã„ã‚‹æ™‚ã€æ°—åˆ†ãŒè‰¯ãã¦ãƒ¯ã‚¯ãƒ¯ã‚¯ã—ã¾ã™ã€‚'
                }
            }
        ];

        // --- ì „ì—­ ë³€ìˆ˜ ---
        let currentPage = 'learn';
        let quizQuestions = [];
        let currentQuestionIndex = 0;
        let correctCount = 0;

        // --- DOM ìš”ì†Œ ---
        const pageLearn = document.getElementById('page-learn');
        const pageQuiz = document.getElementById('page-quiz');
        const tabLearn = document.getElementById('tab-learn');
        const tabQuiz = document.getElementById('tab-quiz');
        const vocabListContainer = document.getElementById('vocab-list');
        
        const quizContainer = document.getElementById('quiz-container');
        const quizQuestionEl = document.getElementById('quiz-question');
        const quizFeedbackEl = document.getElementById('quiz-feedback');
        const quizResultEl = document.getElementById('quiz-result');
        const totalQuestionsEl = document.getElementById('total-questions');
        const correctAnswersEl = document.getElementById('correct-answers');
        const btnCorrect = document.getElementById('btn-correct');
        const btnWrong = document.getElementById('btn-wrong');

        // --- 1. ê³µí†µ ê¸°ëŠ¥ ---

        /**
         * í˜ì´ì§€(íƒ­)ë¥¼ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜
         * @param {string} pageId ('learn' ë˜ëŠ” 'quiz')
         */
        function showPage(pageId) {
            currentPage = pageId;
            if (pageId === 'learn') {
                pageLearn.classList.remove('page-hidden');
                pageQuiz.classList.add('page-hidden');
                tabLearn.classList.replace('tab-inactive', 'tab-active');
                tabQuiz.classList.replace('tab-active', 'tab-inactive');
            } else {
                pageLearn.classList.add('page-hidden');
                pageQuiz.classList.remove('page-hidden');
                tabLearn.classList.replace('tab-active', 'tab-inactive');
                tabQuiz.classList.replace('tab-inactive', 'tab-active');
                startQuiz(); // í€´ì¦ˆ íƒ­ì„ ëˆ„ë¥´ë©´ í€´ì¦ˆ ì‹œì‘
            }
        }

        // --- 2. ë°°ìš°ê¸° í˜ì´ì§€ ê¸°ëŠ¥ ---

        /**
         * 'ë°°ìš°ê¸°' í˜ì´ì§€ì— ì–´íœ˜ ëª©ë¡ì„ ê·¸ë¦¬ëŠ” í•¨ìˆ˜
         */
        function renderVocabList() {
            vocabListContainer.innerHTML = ''; // ëª©ë¡ ë¹„ìš°ê¸°
            vocabData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'flex items-center p-4 bg-gray-50 rounded-lg border border-gray-200';
                card.innerHTML = `
                    <span class="text-4xl mr-4">${item.emoji}</span>
                    <div class="flex-1">
                        <h3 class="text-xl font-semibold text-gray-800">${item.phrase}</h3>
                        <p class="text-gray-600" data-lang-key="${index}">${item.desc.ko}</p>
                    </div>
                `;
                vocabListContainer.appendChild(card);
            });
        }

        /**
         * ì„¤ëª…ì„ ì„ íƒí•œ ì–¸ì–´ë¡œ ë²ˆì—­í•˜ëŠ” í•¨ìˆ˜
         * @param {string} lang ('ko', 'vi', 'zh', 'ja')
         */
        function translateDescriptions(lang) {
            const descriptionElements = document.querySelectorAll('[data-lang-key]');
            descriptionElements.forEach(el => {
                const key = el.dataset.langKey;
                const vocabItem = vocabData[key];
                if (vocabItem && vocabItem.desc[lang]) {
                    el.textContent = vocabItem.desc[lang];
                }
            });
        }

        // --- 3. í€´ì¦ˆ í˜ì´ì§€ ê¸°ëŠ¥ ---

        /**
         * í€´ì¦ˆ ì§ˆë¬¸ ìƒì„± í•¨ìˆ˜ (OX í€´ì¦ˆ)
         * 50% í™•ë¥ ë¡œ ì •ë‹µ(ì´ëª¨ì§€ì™€ ë¬¸êµ¬ê°€ ì¼ì¹˜), 50% í™•ë¥ ë¡œ ì˜¤ë‹µ(ì¼ì¹˜í•˜ì§€ ì•ŠìŒ)
         */
        function createQuizQuestions() {
            quizQuestions = [];
            // ê° ì–´íœ˜ì— ëŒ€í•´ ì •ë‹µ ì§ˆë¬¸ 1ê°œ, ì˜¤ë‹µ ì§ˆë¬¸ 1ê°œì”© ë§Œë“¤ê¸°
            vocabData.forEach((correctItem, index) => {
                // ì •ë‹µ ì§ˆë¬¸
                quizQuestions.push({
                    emoji: correctItem.emoji,
                    phrase: correctItem.phrase,
                    isCorrectMatch: true
                });

                // ì˜¤ë‹µ ì§ˆë¬¸
                // í˜„ì¬ ì–´íœ˜ë¥¼ ì œì™¸í•œ ë‹¤ë¥¸ ì–´íœ˜ ì¤‘ì—ì„œ ëœë¤ìœ¼ë¡œ í•˜ë‚˜ ì„ íƒ
                let wrongIndex = index;
                while (wrongIndex === index) {
                    wrongIndex = Math.floor(Math.random() * vocabData.length);
                }
                quizQuestions.push({
                    emoji: correctItem.emoji,
                    phrase: vocabData[wrongIndex].phrase,
                    isCorrectMatch: false
                });
            });
            
            // ì§ˆë¬¸ ìˆœì„œ ì„ê¸°
            shuffleArray(quizQuestions);
        }

        /**
         * ë°°ì—´ì„ ëœë¤ìœ¼ë¡œ ì„ëŠ” í•¨ìˆ˜ (Fisher-Yates Shuffle)
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * í€´ì¦ˆ ì‹œì‘ í•¨ìˆ˜
         */
        function startQuiz() {
            createQuizQuestions();
            currentQuestionIndex = 0;
            correctCount = 0;
            quizContainer.classList.remove('page-hidden');
            quizResultEl.classList.add('page-hidden');
            quizFeedbackEl.textContent = '';
            loadQuizQuestion();
        }

        /**
         * í˜„ì¬ ì¸ë±ìŠ¤ì˜ í€´ì¦ˆ ì§ˆë¬¸ì„ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜
         */
        function loadQuizQuestion() {
            if (currentQuestionIndex < quizQuestions.length) {
                const q = quizQuestions[currentQuestionIndex];
                quizQuestionEl.innerHTML = `
                    <p class="text-6xl mb-4">${q.emoji}</p>
                    <p class="text-xl font-semibold">"${q.phrase}"</p>
                `;
                // ì •ë‹µ/ì˜¤ë‹µ ë²„íŠ¼ í™œì„±í™”
                btnCorrect.disabled = false;
                btnWrong.disabled = false;
                btnCorrect.onclick = () => checkAnswer(true);
                btnWrong.onclick = () => checkAnswer(false);
            } else {
                // í€´ì¦ˆ ì¢…ë£Œ
                showQuizResult();
            }
        }

        /**
         * ì‚¬ìš©ìì˜ ë‹µì„ ì²´í¬í•˜ëŠ” í•¨ìˆ˜
         * @param {boolean} userAnswer (true: 'O', false: 'X')
         */
        function checkAnswer(userAnswer) {
            // ë²„íŠ¼ ë¹„í™œì„±í™” (ì¤‘ë³µ í´ë¦­ ë°©ì§€)
            btnCorrect.disabled = true;
            btnWrong.disabled = true;

            const q = quizQuestions[currentQuestionIndex];
            const isAnswerCorrect = (userAnswer === q.isCorrectMatch);

            if (isAnswerCorrect) {
                quizFeedbackEl.textContent = 'ì •ë‹µ! âœ…';
                quizFeedbackEl.className = 'mt-6 text-2xl font-bold h-8 text-green-600';
                correctCount++;
            } else {
                quizFeedbackEl.textContent = 'í‹€ë ¸ì–´ìš”... âŒ';
                quizFeedbackEl.className = 'mt-6 text-2xl font-bold h-8 text-red-600';
            }

            // 1ì´ˆ í›„ì— ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™
            setTimeout(() => {
                currentQuestionIndex++;
                quizFeedbackEl.textContent = '';
                loadQuizQuestion();
            }, 1000);
        }

        /**
         * í€´ì¦ˆ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜
         */
        function showQuizResult() {
            quizContainer.classList.add('page-hidden');
            quizResultEl.classList.remove('page-hidden');
            totalQuestionsEl.textContent = quizQuestions.length;
            correctAnswersEl.textContent = correctCount;
        }

        // --- ì´ˆê¸°í™” ---
        // DOMì´ ë¡œë“œë˜ë©´ 'ë°°ìš°ê¸°' í˜ì´ì§€ë¥¼ ê·¸ë¦¬ê³  ê¸°ë³¸ í˜ì´ì§€ë¡œ ì„¤ì •
        document.addEventListener('DOMContentLoaded', () => {
            renderVocabList();
            showPage('learn');
        });
    </script>
</body>
</html>
