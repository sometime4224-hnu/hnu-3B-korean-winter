<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>서울대 한국어 3B - 복습 5 듣기 퀴즈 (정밀 검토본)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        .modal-enter { opacity: 0; transform: scale(0.95); }
        .modal-enter-active { opacity: 1; transform: scale(1); transition: opacity 200ms ease-out, transform 200ms ease-out; }
        .modal-exit { opacity: 1; transform: scale(1); }
        .modal-exit-active { opacity: 0; transform: scale(0.95); transition: opacity 150ms ease-in, transform 150ms ease-in; }
        
        /* 옵션 텍스트 줄바꿈 처리 */
        .option-text {
            display: block;
            word-break: keep-all;
            line-height: 1.5;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Header -->
    <header class="bg-indigo-600 text-white p-4 shadow-md sticky top-0 z-20">
        <div class="max-w-3xl mx-auto flex justify-between items-center">
            <h1 class="text-lg md:text-xl font-bold flex items-center">
                <i class="fas fa-check-double mr-2"></i>서울대 한국어 3B 복습 5
            </h1>
            <span class="text-xs md:text-sm bg-indigo-800 px-3 py-1 rounded-full text-indigo-100 font-medium">듣기 평가</span>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-3xl mx-auto p-4 pb-24">
        
        <!-- Instruction Card -->
        <div class="bg-white rounded-lg shadow-sm p-5 mb-6 border-l-4 border-indigo-500">
            <h2 class="font-bold text-lg mb-2 text-indigo-900">안내 사항</h2>
            <p class="text-slate-600 text-sm md:text-base leading-relaxed">
                오디오를 듣고 물음에 맞는 답을 고르십시오.<br>
                각 문제 오른쪽 상단의 <span class="text-indigo-600 font-bold bg-indigo-50 px-1 rounded"><i class="fas fa-file-alt"></i> 지문 보기</span> 버튼을 누르면 대본을 확인할 수 있습니다.
            </p>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="space-y-6">
            <!-- Questions injected by JS -->
        </div>

        <!-- Submit Button -->
        <div class="fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-200 shadow-lg md:static md:bg-transparent md:border-none md:shadow-none md:mt-10 md:mb-10 text-center z-10">
            <button onclick="submitQuiz()" class="w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-12 rounded-lg shadow-md transition duration-300 transform active:scale-95">
                채점하기
            </button>
        </div>

    </main>

    <!-- Script Modal -->
    <div id="script-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden" aria-hidden="true">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-black bg-opacity-60 transition-opacity" onclick="closeModal()"></div>
        
        <!-- Modal Content -->
        <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full mx-4 max-h-[85vh] flex flex-col relative transform transition-all z-10">
            <div class="p-4 border-b bg-indigo-50 flex justify-between items-center rounded-t-xl">
                <h3 class="font-bold text-lg text-indigo-900 flex items-center">
                    <i class="fas fa-script mr-2 text-indigo-500"></i>듣기 지문
                </h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 p-1">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-6 overflow-y-auto text-slate-700 leading-7 text-sm md:text-base bg-white" id="modal-content">
                <!-- Script injected here -->
            </div>
            <div class="p-4 border-t bg-gray-50 text-right rounded-b-xl">
                <button onclick="closeModal()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-5 rounded-lg transition-colors">
                    닫기
                </button>
            </div>
        </div>
    </div>

    <!-- Result Modal -->
    <div id="result-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden" aria-hidden="true">
        <div class="absolute inset-0 bg-black bg-opacity-60"></div>
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-8 text-center relative z-10 mx-4 transform transition-all scale-100">
            <div class="mb-5">
                <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-indigo-100 text-indigo-600 mb-2">
                    <i class="fas fa-clipboard-check text-4xl"></i>
                </div>
            </div>
            <h2 class="text-2xl font-bold mb-2 text-gray-900">채점 완료</h2>
            <p class="text-gray-500 mb-6">수고하셨습니다! 결과는 다음과 같습니다.</p>
            
            <div class="bg-indigo-50 rounded-lg p-4 mb-6">
                <span class="block text-gray-500 text-sm uppercase tracking-wide font-semibold">총점</span>
                <span id="score-display" class="text-4xl font-extrabold text-indigo-600"></span>
            </div>

            <button onclick="closeResultModal()" class="w-full bg-indigo-600 text-white py-3 px-6 rounded-lg font-bold hover:bg-indigo-700 transition duration-300">
                결과 확인 및 오답 노트
            </button>
        </div>
    </div>

    <script>
        // Quiz Data (Verified)
        const quizData = [
            {
                id: 2,
                instruction: "다음은 무엇에 대한 글입니까?",
                options: [
                    "스마트폰으로 대화하기",
                    "스마트폰으로 공부하기",
                    "스마트폰으로 사람 찾기",
                    "스마트폰 하는 시간 줄이기"
                ],
                answer: 3, // ④
                script: "[남] 스마트폰으로 잃어버린 것들을 찾읍시다. 밥 먹을 때, 친구와 함께 있을 때, 게임할 때 스마트폰 하느라 대화, 사람, 관심 등을 잃어버린 것은 아닙니까? 우리 모두 스마트폰을 보는 시간을 줄이고 대화하고 사람을 만나는 시간을 가지도록 합시다."
            },
            {
                id: 3,
                instruction: "다음 대화를 잘 듣고 이어질 수 있는 말을 고르십시오.",
                options: [
                    "응, 정말 불편해 보인다.",
                    "그래, 교환하는 게 좋겠다.",
                    "바지 정장보다는 치마 정장이 잘 어울린다.",
                    "그래도 정장을 입고 가는 게 좋지 않을까?"
                ],
                answer: 3, // ④
                script: "[남] 오늘 면접이라고 하지 않았어? 그런데 옷차림이 왜 그래?\n[여] 정장을 입어 보니까 너무 꽉 끼고 불편해서... 이렇게 입어도 깔끔해 보이고 괜찮지 않아?"
            },
            {
                id: 4,
                instruction: "다음 대화를 잘 듣고 이어질 수 있는 말을 고르십시오.",
                options: [
                    "아니야, 민수하고 인사하도록 해.",
                    "동창회에 오는 길에 민수를 봤어.",
                    "민수가 동창회에 안 온 줄 몰랐어.",
                    "정말? 민수가 하도 달라져서 몰라봤어."
                ],
                answer: 3, // ④
                script: "[남] 민수도 동창회에 온다고 하지 않았어? 왜 안 보이지?\n[여] 무슨 소리야? 우리 옆 테이블에 앉아 있는데. 아까 인사도 했잖아."
            },
            {
                id: 5,
                instruction: "다음 대화를 잘 듣고 이어질 수 있는 말을 고르십시오.",
                options: [
                    "네, 농사짓는 게 힘들어서 포기했어요.",
                    "그럼요. 고마워하지 않으면 안 돼요.",
                    "그냥 받으세요. 나누면 나눌수록 더 기분이 좋아요.",
                    "미안해요. 제가 선물을 드렸어야 했는데 준비를 못 했어요."
                ],
                answer: 2, // ③
                script: "[남] 제가 직접 키운 감자 좀 가져왔어요. 좀 드셔 보세요.\n[여] 어머, 고마워요. 힘들게 농사지은 걸 제가 그냥 받아도 될지 모르겠네요."
            },
            {
                id: 6,
                instruction: "다음 대화를 잘 듣고 여자가 이어서 할 행동으로 알맞은 것을 고르십시오.",
                options: [
                    "하늘색 재킷을 사러 간다.",
                    "색깔 있는 원피스로 갈아입는다.",
                    "흰색 원피스 위에 재킷을 입는다.",
                    "회색 원피스를 입고 결혼식을 한다."
                ],
                answer: 2, // ③
                script: "[남] 어디에 가려고 그렇게 옷에 신경 써? 옷을 입었다 벗었다 하고......\n[여] 응, 친구 결혼식이 있어서... 이 흰 원피스가 맘에 드는데 결혼식에 입고 가기는 좀 그렇지?\n[남] 음... 그 위에 색깔 있는 옷을 입고 가면 괜찮을 것 같은데...\n[여] 그래? 그럼 이 하늘색 재킷을 입고 가야겠다."
            },
            {
                id: 7,
                instruction: "다음 대화를 잘 듣고 여자가 이어서 할 행동으로 알맞은 것을 고르십시오.",
                options: [
                    "시골로 이사한다.",
                    "'지원 센터'에 간다.",
                    "'지원 센터'에 전화한다.",
                    "인터넷으로 '지원 센터'를 찾아본다."
                ],
                answer: 1, // ②
                script: "[여] 나도 시골로 이사할까 하는데 시골 생활이 어때?\n[남] 좀 불편한 점은 있는데 그래도 좋아. 이사 가기 전에 인터넷을 찾아보거나 '지원 센터'에 전화해서 자세한 걸 알아보면 도움이 될 거야.\n[여] 참, 집 근처에 '지원 센터'가 있어. 지금 가서 물어보면 되겠다."
            },
            {
                id: 8,
                instruction: "다음 대화를 잘 듣고 여자가 이어서 할 행동으로 알맞은 것을 고르십시오.",
                options: [
                    "컴퓨터를 켠다.",
                    "컴퓨터를 끈다.",
                    "아빠한테 컴퓨터를 가르친다.",
                    "아빠한테 컴퓨터를 쓰게 한다."
                ],
                answer: 1, // ②
                script: "[남] 영희야, 컴퓨터 다 쓴 거 아니니? 컴퓨터를 안 껐네.\n[여] 나중에 또 쓸 거예요. 자꾸 껐다가 켜는 것도 귀찮아요.\n[남] 그래도 전기를 절약하지 않으면 안 돼. 귀찮아도 쓰지 않을 때는 끄도록 해.\n[여] 네, 알겠어요. 아빠."
            },
            {
                id: 9,
                instruction: "다음을 듣고 내용과 일치하는 것을 고르십시오.",
                options: [
                    "여자는 아이에게 점심을 먹여야 한다.",
                    "여자는 피아노 연습을 열심히 해야 한다.",
                    "여자는 아이에게 간식을 만들어 줘야 한다.",
                    "여자는 아이를 유치원까지 데려다 줘야 한다."
                ],
                answer: 2, // ③
                script: "[남] 누나, 오늘 하루만 대한이 좀 봐줄 수 있어?\n[여] 응, 그래. 뭘 어떻게 해 주면 돼?\n[남] 아침에 집 앞으로 유치원 차가 오니까 그냥 태워서 보내면 돼.\n[여] 집에 오면 점심도 먹여야 되지?\n[남] 아니, 유치원에서 먹고 올 거야. 그냥 간식이나 만들어 줘.\n[여] 알았어. 또 신경 써야 할 건 없어?\n[남] 참, 한 시간 정도 피아노 연습 좀 하게 해 줘. 다음 주에 대회가 있거든."
            },
            {
                id: 10,
                instruction: "다음을 듣고 내용과 일치하는 것을 고르십시오.",
                options: [
                    "팥떡을 먹으면 감기가 빨리 낫는다.",
                    "이사할 때 떡을 돌리면서 인사한다.",
                    "이사할 때 옆집에 주로 송편을 준다.",
                    "새로운 생활을 시작할 때 떡이 중요하다."
                ],
                answer: 1, // ② (내용 일치: 지문에 명시됨. ④번은 주제에 가깝지만 ②번이 더 정확한 사실 관계임)
                script: "[남] 안녕하세요? 한국에서는 새 집으로 이사했을 때 옆집에 떡을 돌리면서 인사를 한다고 들었는데요. 이사 문화에 대해 좀 더 자세하게 알려 주세요.\n[여] 네, 맞습니다. 익숙하지 않은 곳에서 새로운 생활을 시작할 때 인간관계가 중요하죠. 그래서 떡을 돌리면서 이웃과 서로 잘 지내려고 하는 것입니다. 주로 팥떡을 돌리는데..."
            },
            {
                id: 11,
                instruction: "다음을 듣고 남자의 중심 생각을 고르십시오.",
                options: [
                    "도로가 생기면 교통이 불편해진다.",
                    "교통이 편해지면 생활도 편해질 것이다.",
                    "편리한 교통보다 여유 있는 생활이 더 중요하다.",
                    "도로가 생기면 편의 시설을 쉽게 이용할 수 있다."
                ],
                answer: 2, // ③
                script: "[여] 저는 집 앞에 도로가 생기면 더 편하고 좋다고 생각합니다...\n[남] 하지만 도로가 생기면 소음이 심해질 것입니다. 특히 차들이 많이 다니면 다닐수록 시끄러워져서 더 불편할 것 같습니다... 교통은 조금 불편해도 여유 있게 사는 것이 좋다고 생각합니다."
            },
            {
                id: 12,
                instruction: "다음을 듣고 남자의 중심 생각을 고르십시오.",
                options: [
                    "전기 제품은 사용하지 않으면 않을수록 좋다.",
                    "전기를 낭비하는 습관을 꼭 고칠 필요는 없다.",
                    "컴퓨터를 잠깐이라도 사용하지 않을 때는 꼭 꺼야 한다.",
                    "전원을 끄는 것보다 더 중요한 것은 제대로 알고 절약하는 것이다."
                ],
                answer: 3, // ④
                script: "[여] ...전기 제품을 쓰지 않을 때는 플러그를 뽑아 두지 않으면 안 됩니다...\n[남] 저도 전기를 낭비하는 습관을 고쳐야 한다고 생각합니다. 하지만 절약도 잘 알고 해야 합니다. 너무 자주 컴퓨터를 껐다가 켰다가 하면 전기 요금이 더 많이 나올 수도 있습니다... 그냥 켜 두는 게 전기 요금을 덜 나오게 하는 방법입니다."
            },
            {
                id: 13,
                instruction: "다음을 듣고 물음에 답하십시오. (13-14)<br>13. 여자는 누구입니까?",
                options: [
                    "집 주인",
                    "수리 센터 직원",
                    "월세 사는 사람",
                    "보일러 회사 직원"
                ],
                answer: 0, // ①
                script: "[남] 여보세요? 저 월세 사는 사람인데요. 보일러가 고장이 난 것 같아요...\n[여] 전에 다른 사람이 살던 때는 아무 문제가 없었는데... 혹시 학생이 관리를 잘못한 거 아니에요?\n[남] ...집 주인이 고쳐 줘야 된다고 알고 있는데요.\n[여] 그건 그런데요... 수리 센터에 전화해서 수리 기사를 부르세요. 수리비는 나중에 내가 줄게요."
            },
            {
                id: 14,
                instruction: "14. 들은 내용과 맞는 것을 고르십시오.",
                options: [
                    "남자가 수리비를 낼 것이다.",
                    "남자가 수리 센터에 전화할 것이다.",
                    "보일러는 옛날부터 자주 고장이 났다.",
                    "남자가 잘못 해서 보일러가 고장 났다."
                ],
                answer: 1, // ②
                script: "(위와 동일)"
            },
            {
                id: 15,
                instruction: "다음을 듣고 물음에 답하십시오. (15-16)<br>15. 남자의 생각으로 맞는 것을 고르십시오.",
                options: [
                    "정장을 입어야 일을 잘 할 수 있다.",
                    "회사원은 모두 정장을 입어야 한다.",
                    "편한 옷차림으로 일하면 좋은 아이디어가 잘 떠오른다.",
                    "정장을 입으면 깔끔해 보이고 좋은 이미지를 줄 수 있다."
                ],
                answer: 2, // ③
                script: "[남] 저는 회사에 출근할 때 꼭 정장을 입어야 한다고 생각하지 않습니다. 자유롭고 편하게 옷을 입으면 일도 더 잘할 수 있고 좋은 아이디어도 잘 떠오를 것 같습니다...\n[여] 글쎄요. 저는 회사원이라면 깔끔한 옷차림을 하지 않으면 안 된다고 생각합니다...\n[남] ...우리처럼 컴퓨터 게임을 만드는 회사에서는 편한 옷차림이 일하는 데 더 도움이 된다고 생각합니다..."
            },
            {
                id: 16,
                instruction: "16. 들은 내용과 맞는 것을 고르십시오.",
                options: [
                    "집에서 일할 때도 정장을 입어야 한다.",
                    "회사에서 일할 때 컴퓨터 게임을 하면 안 된다.",
                    "회사원들은 모두 매일 야근하고 주말에도 일해야 한다.",
                    "고객을 만나는 일을 하는 회사원은 옷차림에 신경을 써야 한다."
                ],
                answer: 3, // ④
                script: "(위와 동일) [남] ...만약에 영업 사원이라면 외모에 신경을 더 써야 하겠지만..."
            }
        ];

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            
            quizData.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = "bg-white rounded-xl shadow-sm p-6 border border-gray-100 relative";
                
                let optionsHtml = '';
                q.options.forEach((opt, optIndex) => {
                    optionsHtml += `
                        <label class="group block p-3 mb-2 rounded-lg border border-gray-200 cursor-pointer hover:bg-indigo-50 hover:border-indigo-200 transition duration-200 flex items-start">
                            <div class="flex items-center h-full pt-1">
                                <input type="radio" name="q${q.id}" value="${optIndex}" class="form-radio text-indigo-600 h-4 w-4 mr-3 focus:ring-indigo-500">
                            </div>
                            <div class="text-gray-700 flex-1">
                                <span class="font-medium text-gray-500 mr-2 select-none">${'①②③④'.charAt(optIndex)}</span>
                                <span class="option-text inline">${opt}</span>
                            </div>
                        </label>
                    `;
                });

                questionDiv.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center">
                            <span class="bg-indigo-100 text-indigo-700 font-bold py-1 px-3 rounded-lg text-sm mr-3 shadow-sm">${q.id}번</span>
                        </div>
                        <button onclick="showScript(${index})" class="text-xs md:text-sm bg-white border border-gray-200 hover:bg-gray-50 text-gray-500 font-medium py-1.5 px-3 rounded-lg flex items-center transition shadow-sm">
                            <i class="fas fa-file-alt mr-2"></i> 지문 보기
                        </button>
                    </div>
                    <p class="text-gray-800 font-bold text-lg mb-5 leading-snug">${q.instruction}</p>
                    <div class="space-y-2">
                        ${optionsHtml}
                    </div>
                    <div id="feedback-${q.id}" class="hidden mt-4 p-4 rounded-lg text-sm font-semibold border-l-4 shadow-sm animate-fade-in"></div>
                `;
                container.appendChild(questionDiv);
            });
        }

        function showScript(index) {
            const modal = document.getElementById('script-modal');
            const content = document.getElementById('modal-content');
            const modalBox = modal.querySelector('div.bg-white');
            
            // Text formatting
            let scriptText = quizData[index].script
                .replace(/\n/g, '<br><br>') // Double break for speaker change
                .replace(/\[남\]/g, '<strong class="text-blue-600">[남]</strong>')
                .replace(/\[여\]/g, '<strong class="text-pink-600">[여]</strong>');
            
            content.innerHTML = scriptText;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            
            // Animation start
            setTimeout(() => {
                modalBox.classList.add('modal-enter-active');
            }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('script-modal');
            const modalBox = modal.querySelector('div.bg-white');
            
            modalBox.classList.remove('modal-enter-active');
            modalBox.classList.add('modal-exit-active');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                modalBox.classList.remove('modal-exit-active');
            }, 150);
        }

        function closeResultModal() {
            document.getElementById('result-modal').classList.add('hidden');
            // Scroll to top to see feedback
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function submitQuiz() {
            let score = 0;
            const total = quizData.length;
            let answeredCount = 0;

            quizData.forEach(q => {
                const selected = document.querySelector(`input[name="q${q.id}"]:checked`);
                const feedbackDiv = document.getElementById(`feedback-${q.id}`);
                const allLabels = document.querySelectorAll(`input[name="q${q.id}"]`);
                
                // Clear previous styles
                feedbackDiv.className = "hidden mt-4 p-4 rounded-lg text-sm font-semibold border-l-4 shadow-sm";
                allLabels.forEach(input => {
                    const label = input.closest('label');
                    label.classList.remove('bg-green-50', 'border-green-500', 'bg-red-50', 'border-red-500', 'ring-2', 'ring-green-200', 'ring-red-200');
                    // Reset to default
                    label.classList.add('border-gray-200');
                });

                if (selected) {
                    answeredCount++;
                    const answer = parseInt(selected.value);
                    const selectedLabel = selected.closest('label');

                    if (answer === q.answer) {
                        score++;
                        feedbackDiv.className = "mt-4 p-4 rounded-lg text-sm font-medium bg-green-50 text-green-800 border-l-4 border-green-500 block";
                        feedbackDiv.innerHTML = '<div class="flex items-center"><i class="fas fa-check-circle text-lg mr-2 text-green-600"></i>정답입니다!</div>';
                        selectedLabel.classList.remove('border-gray-200');
                        selectedLabel.classList.add('bg-green-50', 'border-green-500', 'ring-2', 'ring-green-200');
                    } else {
                        feedbackDiv.className = "mt-4 p-4 rounded-lg text-sm font-medium bg-red-50 text-red-800 border-l-4 border-red-500 block";
                        feedbackDiv.innerHTML = `<div class="flex items-center"><i class="fas fa-times-circle text-lg mr-2 text-red-600"></i>오답입니다. 정답은 <span class="font-bold mx-1">${q.answer + 1}번</span> 입니다.</div>`;
                        selectedLabel.classList.remove('border-gray-200');
                        selectedLabel.classList.add('bg-red-50', 'border-red-500', 'ring-2', 'ring-red-200');
                        
                        // Highlight correct answer
                        const correctInput = document.querySelector(`input[name="q${q.id}"][value="${q.answer}"]`);
                        if(correctInput) {
                            const correctLabel = correctInput.closest('label');
                            correctLabel.classList.remove('border-gray-200');
                            correctLabel.classList.add('bg-green-50', 'border-green-500', 'border-dashed');
                        }
                    }
                } else {
                    feedbackDiv.className = "mt-4 p-4 rounded-lg text-sm font-medium bg-gray-100 text-gray-600 border-l-4 border-gray-400 block";
                    feedbackDiv.innerHTML = `<div class="flex items-center"><i class="fas fa-exclamation-circle text-lg mr-2"></i>답을 선택하지 않았습니다. 정답은 <span class="font-bold mx-1">${q.answer + 1}번</span> 입니다.</div>`;
                }
            });

            const scoreDisplay = document.getElementById('score-display');
            scoreDisplay.innerText = `${score} / ${total}`;
            document.getElementById('result-modal').classList.remove('hidden');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', renderQuiz);
    </script>
</body>
</html>

